focus_tree = {
	id = china_nationalist_focus
	
	country = {
		factor = 0
		modifier = {
			add = 10
			tag = CHI
			has_dlc = "Waking the Tiger"
		}
	}
	

	default = no

	continuous_focus_position = { x = 20 y = 2000 }

#	focus = {
#		id = CHI_
#		icon = GFX_
#		prerequisite = { focus = }
#		mutually_exclusive = { focus =  }
#		x = -3
#		y = 0
#		relative_position_id = 
#
#		cost = 10
#
#		ai_will_do = {
#			factor = 1
#		}
#
#		available = {
#
#		}
#		
#		bypass = {
#
#		}
#
#		cancel_if_invalid = yes
#		continue_if_invalid = no
#		available_if_capitulated = no
#
#		complete_tooltip = {
#
#		}
#
#		completion_reward = {
#
#		}
#	}
	#shared_focus = CHI_invite_foreign_investors
#############################################################################################################
#################################################请求战时援华#################################################
#############################################################################################################
focus = {
	id = KMT_invite_foreign_investors 
	icon = GFX_CHI_foreign_affair_reform
	x = 48
	y = 0

	cost = 6

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 4
			tag = CHI
		}
	}

	available = {

	}

	bypass = {
		
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		add_offsite_building = { type = industrial_complex level = 2 }
	}
}

focus = {
	id = KMT_mission_to_germany
	icon = GFX_focus_chi_mission_to_germany
	prerequisite = { focus = KMT_invite_foreign_investors }
	x = -7
	y = 1
	relative_position_id = KMT_invite_foreign_investors
	cost = 6

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 4
			tag = CHI
		}
		modifier = {
			factor = 10
			has_country_flag = GER_befriended_by_germany_flag
		}
	}

	available = {
		CR_GER_will_support = yes
	}

	bypass = {
		is_in_faction_with = GER
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		GER = {
			add_opinion_modifier = {
				target = ROOT
				modifier = CHI_mission_to_germany
			}
			add_ai_strategy = {
				type = alliance
				id = ROOT
				value = 100
			}
			add_ai_strategy = {
				type = protect
				id = ROOT
				value = 100
			}
			add_ai_strategy = {
				type = send_volunteers_desire
				id = ROOT
				value = 100
			}
			add_ai_strategy = {
				type = support
				id = ROOT
				value = 100
			}
		}
	}
}

focus = {
	id = KMT_give_falkenhausen_citizenship
	icon = GFX_KMT_give_falkenhausen_citizenship
	prerequisite = { focus = KMT_mission_to_germany }
	x = -1
	y = 1
	relative_position_id = KMT_mission_to_germany

	cost = 6

	ai_will_do = {
		factor = 1
	}

	available = {
		NOT = { has_global_flag = falkenhausen_recalled }
		CR_GER_will_support = yes
	}

	bypass = {
		custom_trigger_tooltip = { 
			tooltip = falkenhausen_tt
			any_other_country = {
				has_completed_focus = KMT_give_falkenhausen_citizenship
			}	
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		custom_effect_tooltip = available_chief_of_army
		show_ideas_tooltip = CHI_alexander_von_falkenhausen_army_chief
		show_unit_leaders_tooltip = CHI_alexander_von_falkenhausen
	}
}

focus = {
	id = KMT_chinese_general_staff
	icon = GFX_KMT_chinese_general_staff
	prerequisite = { focus = KMT_give_falkenhausen_citizenship }
	prerequisite = { focus = KMT_closer_ties_with_germany }
	x = 0
	y = 1
	relative_position_id = KMT_give_falkenhausen_citizenship

	cost = 6

	ai_will_do = {
		factor = 1
	}

	available = {
		NOT = { has_idea = CHI_incompetent_officers }
		NOT = { has_global_flag = falkenhausen_recalled }
		if = {
			limit = {
				NOT = {
					OR = {
						has_government = neutrality
						GER = {
							has_government = ROOT
						}
					}
				}
			}
			CR_GER_will_support = yes
		}
	}

	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		every_army_leader = {
			add_planning = 1
		}
		add_ideas = CHI_chinese_general_staff
	}
}

focus = {
	id = KMT_wargaming_division
	icon = GFX_KMT_wargaming_division
	prerequisite = { focus = KMT_chinese_general_staff }
	x = 0
	y = 1
	relative_position_id = KMT_chinese_general_staff

	cost = 6

	ai_will_do = {
		factor = 1
	}

	available = {
		NOT = { has_global_flag = falkenhausen_recalled }
		CR_GER_will_support = yes
	}

	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		add_ideas = CHI_wargaming_division
		add_doctrine_cost_reduction = {
			name = CHI_wargaming_division
			cost_reduction = 0.5
			uses = 1
			category = land_doctrine
		}
	}
}

focus = {
	id = KMT_closer_ties_with_germany
	icon = GFX_KMT_closer_ties_with_germany
	prerequisite = { focus = KMT_mission_to_germany }
	mutually_exclusive = { focus = KMT_rapprochement_with_soviet_union }
	x = 1
	y = 1
	relative_position_id = KMT_mission_to_germany

	cost = 6

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 4
			tag = CHI
		}
	}

	available = {
		NOT = { has_war_with = GER }
		NOT = { has_global_flag = falkenhausen_recalled }
		CR_GER_will_support = yes
	}

	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		add_offsite_building = { type = industrial_complex level = 1 }
	}
}

focus = {
	id = KMT_purchase_tanks
	icon = GFX_CHI_motorized_army
	prerequisite = { focus = KMT_closer_ties_with_germany focus = KMT_rapprochement_with_soviet_union }
	x = 1
	y = 1
	relative_position_id = KMT_closer_ties_with_germany

	cost = 6

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 4
			tag = CHI
		}
	}

	available = {
		OR = {
			CR_GER_will_support = yes
			CR_SOV_will_support = yes
		}
	}

	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		custom_effect_tooltip = CHI_purchase_tanks_tt
		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}
			if = {
				limit = {
					NOT = {
						has_completed_focus = KMT_closer_ties_with_germany
						has_completed_focus = KMT_rapprochement_with_soviet_union
					}
				}
				add_equipment_subsidy = {
					cic = 500
					equipment_type = light_tank_chassis
					seller_trigger = CHI_tank_seller_for_subsidy
				}
			}
			else_if = {
				limit = {
					has_completed_focus = KMT_closer_ties_with_germany
				}
				add_equipment_subsidy = {
					cic = 500
					equipment_type = light_tank_chassis
					seller_tags = { GER } 
				}
			}
			else_if = {
				limit = {
					has_completed_focus = KMT_rapprochement_with_soviet_union
				}
				add_equipment_subsidy = {
					cic = 500
					equipment_type = light_tank_chassis
					seller_tags = { SOV } 
				}
			}
		}
		hidden_effect = { 
			if = {
				limit = {
					NOT = {
						has_dlc = "No Step Back"
					}
				}
				if = {
					limit = {
						not = {
							has_tech = gwtank
						}
					}
					set_technology = { gwtank = 1 }
				}
				if = {
					limit = {
						has_completed_focus = KMT_closer_ties_with_germany
					}
					add_equipment_to_stockpile = { type = light_tank_equipment_1 amount = 100 producer = GER }
				}
				if = {
					limit = {
						has_completed_focus = KMT_rapprochement_with_soviet_union
					}
					add_equipment_to_stockpile = { type = light_tank_equipment_1 amount = 100 producer = SOV }
				}
			}
			else = {
				if = {
					limit = {
						not = {
							has_tech = gwtank_chassis
						}
					}
					set_technology = { gwtank_chassis = 1 }
				}
				if = {
					limit = {
						has_completed_focus = KMT_closer_ties_with_germany
					}
					add_equipment_to_stockpile = { type = light_tank_chassis_1 amount = 100 producer = GER  variant_name = "Panzer I Ausf. A"} 
				}
				if = {
					limit = {
						has_completed_focus = KMT_rapprochement_with_soviet_union
					}
					add_equipment_to_stockpile = { type = light_tank_chassis_1 amount = 100 producer = SOV variant_name = "T-26TU mod. 1933" }
				}
			}
		}
	}
}

focus = {
	id = KMT_mission_to_the_soviet_union
	icon = GFX_focus_chi_mission_to_the_soviet_union
	prerequisite = { focus = KMT_invite_foreign_investors }
	x = 4
	y = 0
	relative_position_id = KMT_mission_to_germany

	cost = 6

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 4
			tag = CHI
		}
	}

	available = {
		CR_SOV_will_support = yes
	}

	bypass = {
		is_in_faction_with = SOV
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		SOV = {
			add_opinion_modifier = {
				target = ROOT
				modifier = CHI_mission_to_the_soviet_union
			}
			add_ai_strategy = {
				type = alliance
				id = ROOT
				value = 100
			}
			add_ai_strategy = {
				type = protect
				id = ROOT
				value = 100
			}
			add_ai_strategy = {
				type = send_volunteers_desire
				id = ROOT
				value = 100
			}
			add_ai_strategy = {
				type = support
				id = ROOT
				value = 100
			}
		}
	}
}

focus = {
	id = KMT_rapprochement_with_soviet_union
	icon = GFX_KMT_rapprochement_with_soviet_union
	prerequisite = { focus = KMT_mission_to_the_soviet_union }
	mutually_exclusive = { focus = KMT_closer_ties_with_germany }
	x = -1
	y = 1
	relative_position_id = KMT_mission_to_the_soviet_union

	cost = 1

	ai_will_do = {
		factor = 1
	}

	available = {
		CR_SOV_will_support = yes
	}

	bypass = {
		OR = {
			has_non_aggression_pact_with = SOV
			is_in_faction_with = SOV
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

	completion_reward = {
		diplomatic_relation = {
			country = SOV
			relation = non_aggression_pact
			active = yes
		}
	}
}

focus = {
	id = KMT_the_soviet_volunteer_group
	icon = GFX_KMT_the_soviet_volunteer_group
	prerequisite = { focus = KMT_mission_to_the_soviet_union }
	x = 1
	y = 1
	relative_position_id = KMT_mission_to_the_soviet_union

	cost = 6

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 4
			tag = CHI
		}
	}

	available = {
		CR_SOV_will_support = yes
	}

	bypass = {
		any_other_country = {
			has_completed_focus = KMT_the_soviet_volunteer_group
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		SOV = { country_event = wtt_china_shared.11 }
	}
}

focus = {
	id = KMT_invite_soviet_advisers
	icon = GFX_KMT_invite_soviet_advisers
	prerequisite = { focus = KMT_the_soviet_volunteer_group }
	x = 0
	y = 1
	relative_position_id = KMT_the_soviet_volunteer_group

	cost = 6

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 4
			tag = CHI
		}
	}

	available = {
		CR_SOV_will_support = yes	
	}

	bypass = {
		custom_trigger_tooltip = {
			tooltip = soviet_advisers_tt
			any_other_country = {
				any_army_leader = {
					has_id = 600
				}
			}
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		create_corps_commander = {
			name = "Aleksandr Cherepanov"
			gfx = GFX_portrait_sov_aleksandr_cherepanov 
			skill = 3
			attack_skill = 3
			defense_skill = 3
			planning_skill = 2
			logistics_skill = 2
			id = 600
		}
	}
}

focus = {
	id = KMT_reach_out_to_france
	icon = GFX_focus_chi_reach_out_to_france
	mutually_exclusive = { focus = KMT_british_cooperation }
	prerequisite = { focus = KMT_invite_foreign_investors }
	x = 4
	y = 0
	relative_position_id = KMT_mission_to_the_soviet_union

	cost = 6

	ai_will_do = {
		factor = 1
	}

	available = {
		CR_FRA_will_support = yes
	}

	bypass = {
		
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		FRA = {
			add_opinion_modifier = {
				target = ROOT
				modifier = CHI_reach_out_to_france
			}
			add_ai_strategy = {
				type = alliance
				id = ROOT
				value = 100
			}
			add_ai_strategy = {
				type = protect
				id = ROOT
				value = 100
			}
			add_ai_strategy = {
				type = send_volunteers_desire
				id = ROOT
				value = 100
			}
			add_ai_strategy = {
				type = support
				id = ROOT
				value = 100
			}
		}
	}
}

focus = {
	id = KMT_guarantee_the_hanoi_route
	icon = GFX_KMT_guarantee_the_hanoi_route
	prerequisite = { focus = KMT_reach_out_to_france }
	x = 0
	y = 1
	relative_position_id = KMT_reach_out_to_france

	cost = 6

	ai_will_do = {
		factor = 1
		modifier = {
			FRA = {
				has_war = yes
			}
			factor = 0
		}
	}

	available = {
		all_other_country = { NOT = { has_completed_focus = KMT_guarantee_the_hanoi_route } }
		CR_FRA_will_support = yes
		325 = { #Yunnan
			CONTROLLER = {
				OR = {
					tag = ROOT
					is_subject_of = ROOT
					is_in_faction_with = ROOT
				}
			}
		}
		671 = { #Tonkin
			CONTROLLER = {
				NOT = { has_war_with = ROOT }
				OR = {
					original_tag = FRA
					is_subject_of = FRA
				}
			}
		}
	}

	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		671 = { #Tonkin
			set_state_flag = CHI_needed_for_hanoi_route
		}
		325 = { #Yunnan
			set_state_flag = CHI_needed_for_hanoi_route
		}	
		set_variable = { CHI_hanoi_route_current_level = 3 }
		add_offsite_building = { type = arms_factory level = 3 }
	}
}

focus = {
	id = KMT_french_military_mission
	icon = GFX_KMT_french_military_mission
	prerequisite = { focus = KMT_guarantee_the_hanoi_route }
	x = 0
	y = 1
	relative_position_id = KMT_guarantee_the_hanoi_route

	cost = 6

	ai_will_do = {
		factor = 1
	}

	available = {
		CR_FRA_will_support = yes
	}

	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		air_experience = 25
		if = {
			limit = {
				NOT = {
					any_other_country = {
						any_army_leader = {
							has_id = 604
						}
					}
				}
			}
			create_corps_commander = {
				name = "Charles Berger"
				gfx = GFX_europe_generic_land_1
				attack_skill = 2
				defense_skill = 3
				planning_skill = 2
				logistics_skill = 3
				id = 604
				skill = 3
			}
		}
		else_if = {
			limit = {
				NOT = {
					any_other_country = {
						any_army_leader = {
							has_id = 605
						}
					}
				}
			}
			create_corps_commander = {
				name = "Jean Beauton"
				gfx = GFX_europe_generic_land_2
				attack_skill = 2
				defense_skill = 3
				planning_skill = 2
				logistics_skill = 3
				id = 605
				skill = 3
			}
		}
		else_if = {
			limit = {
				NOT = {
					any_other_country = {
						any_army_leader = {
							has_id = 606
						}
					}
				}
			}
			create_corps_commander = {
				name = "Thierry BÃ©nÃ©dicte"
				gfx = GFX_europe_generic_land_3
				attack_skill = 2
				defense_skill = 3
				planning_skill = 2
				logistics_skill = 3
				id = 606
				skill = 3
			}
		}
	}
}

focus = {
	id = KMT_french_drill
	icon = GFX_KMT_french_drill
	prerequisite = { focus = KMT_french_military_mission }
	x = 0
	y = 1
	relative_position_id = KMT_french_military_mission

	cost = 6

	ai_will_do = {
		factor = 1
	}

	available = {
		CR_FRA_will_support = yes
	}

	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		every_army_leader = {
			add_defense = 1
		}
		add_ideas = CHI_french_drill		
	}
}

focus = {
	id = KMT_british_cooperation
	icon = GFX_focus_chi_british_cooperation
	mutually_exclusive = { focus = KMT_reach_out_to_france }
	prerequisite = { focus = KMT_invite_foreign_investors }
	x = 2
	y = 0
	relative_position_id = KMT_reach_out_to_france

	cost = 6

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 4
			tag = CHI
		}
		modifier = {
			factor = 10
			has_country_flag = ENG_influenced_by_britain_flag
		}
	}

	available = {
		CR_ENG_will_support = yes
	}

	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		ENG = {
			add_opinion_modifier = {
				target = ROOT
				modifier = CHI_british_cooperation
			}
			add_ai_strategy = {
				type = alliance
				id = ROOT
				value = 100
			}
			add_ai_strategy = {
				type = protect
				id = ROOT
				value = 100
			}
			add_ai_strategy = {
				type = send_volunteers_desire
				id = ROOT
				value = 100
			}
			add_ai_strategy = {
				type = support
				id = ROOT
				value = 100
			}
		}
	}
}

focus = {
	id = KMT_burma_road
	icon = GFX_KMT_burma_road
	prerequisite = { focus = KMT_british_cooperation }
	x = 0
	y = 1
	relative_position_id = KMT_british_cooperation

	cost = 6

	ai_will_do = {
		factor = 1		
		modifier = {
			factor = 4
			tag = CHI
		}
		modifier = {
			RAJ = {
				exists = yes
				NOT = {
					is_in_faction_with = ENG
				}
			}
			factor = 0
		}
	}

	available = {
		OR = {
			is_subject = no
			is_subject_of = ENG
		}
		all_other_country = { NOT = { has_completed_focus = KMT_burma_road } }
		CR_ENG_will_support = yes
		325 = { #Yunnan
			CONTROLLER = {
				OR = {
					tag = ROOT
					is_subject_of = ROOT
					is_in_faction_with = ROOT
				}
			}
		}
		288 = { #Burma
			CONTROLLER = {
				NOT = { has_war_with = ROOT }
				OR = {
					original_tag = ENG
					is_subject_of = ENG
				}				
			}
		}
		640 = { #Mandalay
			CONTROLLER = {
				NOT = { has_war_with = ROOT }
				OR = {
					original_tag = ENG
					is_subject_of = ENG
				}				
			}
		}
	}

	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		288 = { #Burma
			set_state_flag = CHI_needed_for_burma_road
		}
		325 = { #Yunnan
			set_state_flag = CHI_needed_for_burma_road
		}
		640 = { #Mandalay
			set_state_flag = CHI_needed_for_burma_road
		}
		set_variable = { CHI_burma_road_current_level = 2 }
		add_offsite_building = { type = arms_factory level = 2 }
	}
}

focus = {
	id = KMT_ledo_road
	icon = GFX_KMT_ledo_road
	prerequisite = { focus = KMT_burma_road }
	prerequisite = { focus = KMT_the_hump }
	x = 0
	y = 2
	relative_position_id = KMT_burma_road

	cost = 6

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 4
			tag = CHI
		}
		modifier = {
			RAJ = {
				exists = yes
				NOT = {
					is_in_faction_with = ENG
				}
			}
			factor = 0
		}
	}

	available = {
		OR = {
			is_subject = no
			is_subject_of = ENG
		}
		all_other_country = { NOT = { has_completed_focus = KMT_ledo_road } }
		CR_ENG_will_support = yes
		325 = { #Yunnan
			CONTROLLER = {
				OR = {
					tag = ROOT
					is_subject_of = ROOT
					is_in_faction_with = ROOT
				}
			}
		}
		432 = { #Assam
			CONTROLLER = {
				NOT = { has_war_with = ROOT }
				OR = {
					original_tag = ENG
					is_subject_of = ENG
				}				
			}
		}
		640 = { #Mandalay
			CONTROLLER = {
				NOT = { has_war_with = ROOT }
				OR = {
					original_tag = ENG
					is_subject_of = ENG
				}				
			}
		}
	}

	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		432 = { #Assam
			set_state_flag = CHI_needed_for_ledo_road
		}
		325 = { #Yunnan
			set_state_flag = CHI_needed_for_ledo_road
		}
		640 = { #Mandalay
			set_state_flag = CHI_needed_for_ledo_road
		}
		set_variable = { CHI_ledo_road_current_level = 1 }
		add_offsite_building = { type = arms_factory level = 1 }
	}
}

focus = {
	id = KMT_fighter_purchases
	icon = GFX_KMT_local_fighter_production
	prerequisite = { focus = KMT_british_cooperation focus = KMT_mission_to_the_us }
	x = 2
	y = 1
	relative_position_id = KMT_british_cooperation

	cost = 6

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 4
			tag = CHI
		}
	}

	available = {
		OR = {
			AND = {
				has_completed_focus = KMT_british_cooperation
				CR_ENG_will_support = yes
			}
			AND = {
				has_completed_focus = KMT_mission_to_the_us
				CR_USA_will_support = yes
			}
		}
	}

	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		custom_effect_tooltip = CHI_purchase_fighters_tt
		if = {
			limit = {
				has_dlc = "Arms Against Tyranny"
			}
			if = {
				limit = {
					NOT = {
						has_completed_focus = KMT_british_cooperation
						has_completed_focus = KMT_mission_to_the_us
					}
				}
				add_equipment_subsidy = {
					cic = 500
					equipment_type = small_plane_airframe
					seller_trigger = CHI_plane_seller_for_subsidy
				}
			}
			if = {
				limit = {
					has_completed_focus = KMT_british_cooperation
				}
				add_equipment_subsidy = {
					cic = 500
					equipment_type = small_plane_airframe
					seller_tags = { ENG } 
				}
			}
			if = {
				limit = {
					has_completed_focus = KMT_mission_to_the_us
				}
				add_equipment_subsidy = {
					cic = 500
					equipment_type = small_plane_airframe
					seller_tags = { USA } 
				}
			}
		}
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_dlc = "By Blood Alone"
					}
				}
				if = {
					limit = {
						not = {
							has_tech = early_fighter
						}
					}
					set_technology = { early_fighter = 1 }
				}
				if = {
					limit = {
						has_completed_focus = KMT_british_cooperation
						not = { has_war_with = ENG }
					}
					add_equipment_to_stockpile = { type = fighter_equipment_0 amount = 50 producer = ENG }
				}
				if = {
					limit = {
						has_completed_focus = KMT_mission_to_the_us
						not = { has_war_with = USA }
					}
					add_equipment_to_stockpile = { type = fighter_equipment_0 amount = 50 producer = USA }
				}
			}
			else = {
				if = {
					limit = {
						not = {
							has_tech = iw_small_airframe
						}
					}
					set_technology = { iw_small_airframe = 1 }
				}
				if = {
					limit = {
						has_completed_focus = KMT_british_cooperation
						not = { has_war_with = ENG }
					}
					add_equipment_to_stockpile = { type = small_plane_airframe_0 amount = 50 producer = ENG variant_name = "Gloster Gladiator"}
				}
				if = {
					limit = {
						has_completed_focus = KMT_mission_to_the_us
						not = { has_war_with = USA }
					}
					add_equipment_to_stockpile = { type = small_plane_airframe_1 amount = 50 producer = USA variant_name = "P-36A"}
				}
			}
		}
	}
}

focus = {
	id = KMT_the_hump
	icon = GFX_KMT_the_hump
	prerequisite = { focus = KMT_hire_chennault }
	x = 1
	y = 1
	relative_position_id = KMT_fighter_purchases

	cost = 6

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 4
			tag = CHI
		}
		modifier = {
			RAJ = {
				exists = yes
				NOT = {
					is_in_faction_with = ENG
				}
			}
			factor = 0
		}
	}

	available = {
		OR = {
			is_subject = no
			is_subject_of = USA
		}
		# all_other_country = { NOT = { has_completed_focus = KMT_the_hump } }
		has_completed_focus = KMT_mission_to_the_us
		CR_USA_will_support = yes
		# 601 = { #Xikang
		# 	CONTROLLER = {
		# 		OR = {
		# 			tag = ROOT
		# 			is_subject_of = ROOT
		# 			is_in_faction_with = ROOT
		# 		}
		# 	}
		# }
		434 = { #Arunachal Pradesh
			CONTROLLER = {
				NOT = { has_war_with = ROOT }		
			}
		}
	}

	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {		
		434 = { #Arunachal Pradesh
			set_state_flag = CHI_needed_for_the_hump
		}
		601 = { #Xikang
			set_state_flag = CHI_needed_for_the_hump
		}	
		set_variable = { CHI_the_hump_current_level = 1 }
		add_offsite_building = { type = arms_factory level = 1 }
	}
}

focus = {
	id = KMT_chinese_expeditionary_force
	icon = GFX_KMT_chinese_expeditionary_force
	prerequisite = { focus = KMT_the_hump }
	x = 0
	y = 1
	relative_position_id = KMT_the_hump

	cost = 6

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 4
			tag = CHI
		}
	}

	available = {
		NOT = { USA = { has_country_flag = joseph_stilwell_sent_to_china } }
		CR_USA_will_support = yes
		USA = {
			has_civil_war = no
		}
	}

	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		USA = {
			country_event = {
				id = wtt_china_shared.12
				hours = 1
			}
		}
	}
}

focus = {
	id = KMT_mission_to_the_us
	icon = GFX_focus_chi_mission_to_the_us
	prerequisite = { focus = KMT_invite_foreign_investors }
	x = 4
	y = 0
	relative_position_id = KMT_british_cooperation

	cost = 6

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 4
			tag = CHI
		}
	}

	available = {
		CR_USA_will_support = yes
	}

	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		USA = {
			add_opinion_modifier = {
				target = ROOT
				modifier = CHI_mission_to_the_us
			}
			add_ai_strategy = {
				type = alliance
				id = ROOT
				value = 100
			}
			add_ai_strategy = {
				type = protect
				id = ROOT
				value = 100
			}
			add_ai_strategy = {
				type = send_volunteers_desire
				id = ROOT
				value = 100
			}
			add_ai_strategy = {
				type = support
				id = ROOT
				value = 100
			}
		}
		USA = { unlock_decision_tooltip = USA_support_the_anti_fascist_war }
		custom_effect_tooltip = CHI_mission_to_the_us_soong_us_decision
	}
}

focus = {
	id = KMT_hire_chennault
	icon = GFX_KMT_hire_chennault
	prerequisite = { focus = KMT_mission_to_the_us }
	x = 2
	y = 0
	relative_position_id = KMT_fighter_purchases

	cost = 5

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 4
			tag = CHI
		}
	}

	available = {
		CR_USA_will_support = yes
		is_subject = no
	}

	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		custom_effect_tooltip = available_theorist
		show_ideas_tooltip = CHI_claire_lee_chennault_theorist
		custom_effect_tooltip = available_chief_of_airforce
		show_ideas_tooltip = CHI_claire_lee_chennault_air_chief
	}
}

focus = {
	id = KMT_invite_the_flying_tigers
	icon = GFX_KMT_invite_the_flying_tigers
	prerequisite = { focus = KMT_hire_chennault }
	x = 1
	y = 1
	relative_position_id = KMT_hire_chennault

	cost = 6

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 4
			tag = CHI
		}
	}

	available = {
		CR_USA_will_support = yes
		is_subject = no
	}

	bypass = {
		any_other_country = {
			has_completed_focus = KMT_invite_the_flying_tigers
		}
	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = no

	completion_reward = {
		USA = {
			country_event = wtt_china_shared.10
		}
	}
}

focus = {
	id = KMT_sino_american_cooperative_organization
	icon = GFX_KMT_sino_american_cooperative_organization
	prerequisite = { focus = KMT_invite_the_flying_tigers }
	x = 1
	y = 2
	relative_position_id = KMT_hire_chennault

	cost = 6

	ai_will_do = {
		factor = 1
		modifier = {
			factor = 4
			tag = CHI
		}
	}

	available = {
		CR_USA_will_support = yes
	}

	bypass = {

	}

	cancel_if_invalid = yes
	continue_if_invalid = no
	available_if_capitulated = yes

	completion_reward = {
		add_tech_bonus = {
			name = CHI_sino_american_cooperative_organization
			bonus = 1.0
			uses = 2
			category = recon_tech
			category = para_tech
		}
	}
}
#############################################################################################################

	focus = {
		id = CHI_military_affairs_commission
		icon = GFX_CHI_military_affairs_commission
		x = 5
		y = 0

		cost = 6

		ai_will_do = {
			factor = 4
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			add_ideas = CHI_military_affairs_commission
		}
	}

	focus = {
		id = CHI_fortify_shanghai
		icon = GFX_CHI_fortify_shanghai
		prerequisite = { focus = CHI_military_affairs_commission }
		x = -4
		y = 1
		relative_position_id = CHI_military_affairs_commission

		cost = 6

		ai_will_do = {
			factor = 1
		}

		available = {
			NOT = {
				any_enemy_country = {
					has_full_control_of_state = 613
				}
			}
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {

		}

		completion_reward = {
			if = {
				limit = { has_full_control_of_state = 613 }
				613 = { # Shanghai
					set_building_level = {
						type = bunker
						province = {
							id = 11913 #Nanjing
							id = 11982 #Nothing
							id = 10076 #Airbase
							id = 12052
							id = 7014 #Shanghai
						}
						level = 2
						instant_build = yes
					}

					if = {
						limit = {
							any_province_building_level = {
								province = {
									id = 7014 #Shanghai
								}
								level < 3
								building = bunker
							}
						}
						set_building_level = {
							type = bunker
							province = {
								id = 7014 #Shanghai
							}
							level = 3
							instant_build = yes
						}
					}

					if = {
						limit = {
							any_province_building_level = {
								province = {
									id = 7014 #Shanghai
								}
								level < 2
								building = coastal_bunker
							}
						}
						set_building_level = {
							type = coastal_bunker
							province = {
								id = 7014 #Shanghai
							}
							level = 2
							instant_build = yes
						}
					}					
				}

				#If not full control, only add forts in provinces bordering the enemy
				#Only time to throw up some emergency stuff
				else = {
					613 = {
						add_building_construction = {
							type = bunker
							province = {
								all_provinces = yes
								limit_to_border = yes
							}
							level = 1
							instant_build = yes
						}
					}

				}
			}
		}
	}

	focus = {
		id = CHI_the_chinese_hindenburg_line
		icon = GFX_CHI_the_chinese_hindenburg_line
		prerequisite = { focus = CHI_fortify_shanghai }
		x = 0
		y = 1
		relative_position_id = CHI_fortify_shanghai

		cost = 6

		ai_will_do = {
			factor = 1
		}

		available = {
			NOT = {
				any_enemy_country = {
					has_full_control_of_state = 613
				}
			}
			NOT = {
				any_enemy_country = {
					has_full_control_of_state = 606
				}
			}
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {

		}

		completion_reward = {
			if = {
				limit = { has_full_control_of_state = 613 }
				613 = { # Shanghai
					set_building_level = {
						type = bunker
						province = {
							id = 11913 #Nanjing
							id = 11982 #Nothing
							id = 10076 #Airbase
							id = 12052
							id = 7014 #Shanghai
						}
						level = 3
						instant_build = yes
					}

					if = {
						limit = {
							any_province_building_level = {
								province = {
									id = 7014 #Shanghai
								}
								level < 4
								building = bunker
							}
						}
						set_building_level = {
							type = bunker
							province = {
								id = 7014 #Shanghai
							}
							level = 4
							instant_build = yes
						}
					}

					if = {
						limit = {
							any_province_building_level = {
								province = {
									id = 7014 #Shanghai
								}
								level < 3
								building = coastal_bunker
							}
						}
						set_building_level = {
							type = coastal_bunker
							province = {
								id = 7014 #Shanghai
							}
							level = 3
							instant_build = yes
						}
					}					
				}

				#If not full control, only add forts in provinces bordering the enemy
				#Only time to throw up some emergency stuff
				else = {
					613 = {
						add_building_construction = {
							type = bunker
							province = {
								all_provinces = yes
								limit_to_border = yes
							}
							level = 1
							instant_build = yes
						}
					}
				}
			}

			if = {
				limit = { has_full_control_of_state = 606 }
				606 = { # Anhui
					set_building_level = {
						type = bunker
						province = {
							id = 1099
							id = 1171
							id = 11937
							id = 10044
						}
						level = 2
						instant_build = yes
					}								
				}

				#If not full control, only add forts in provinces bordering the enemy
				#Only time to throw up some emergency stuff
				else = {
					606 = {
						add_building_construction = {
							type = bunker
							province = {
								all_provinces = yes
								limit_to_border = yes
							}
							level = 1
							instant_build = yes
						}
					}
				}
			}

			if = {
				limit = { has_full_control_of_state = 600 }
				600 = { # Jiangxi
					set_building_level = {
						type = bunker
						province = {
							id = 1153
						}
						level = 2
						instant_build = yes
					}								
				}
			}
		}
	}

	focus = {
		id = CHI_army_reform
		icon = GFX_CHI_army_reform
		prerequisite = { focus = CHI_military_affairs_commission }
		x = 0
		y = 1
		relative_position_id = CHI_military_affairs_commission

		cost = 6

		ai_will_do = {
			factor = 4
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			unlock_decision_tooltip = CRF_CHI_army_reform
		}
	}

	focus = {
		id = CHI_national_defense
		icon = GFX_KMT_combined_arms_warfare
		prerequisite = { focus = CHI_army_reform }
		x = 0
		y = 1
		relative_position_id = CHI_army_reform

		cost = 3

		ai_will_do = {
			factor = 4
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			army_experience = 10
			navy_experience = 10
			air_experience = 10
		}
	}

	focus = {
		id = CHI_NRA_land
		icon = GFX_CHI_NRA_land
		prerequisite = { focus = CHI_national_defense }
		x = 0
		y = 1
		relative_position_id = CHI_national_defense

		cost = 4

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			add_dynamic_modifier = { modifier = CHI_the_roc_land_army_dynamic_modifier }
		}
	}

	focus = {
		id = CHI_motorized_army
		icon = GFX_CHI_motorized_army
		prerequisite = { focus = CHI_NRA_land }
		x = -2
		y = 1
		relative_position_id = CHI_NRA_land

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			add_to_variable = { CHI_the_roc_land_army_army_org_regain = 0.02 }
			custom_effect_tooltip = CHI_motorized_army_ideas_effects
		}
	}

	focus = {
		id = KMT_chinese_panzers
		icon = GFX_KMT_chinese_panzers
		mutually_exclusive = { focus = KMT_hire_soviet_designer }
		prerequisite = { focus = CHI_motorized_army }
		x = -1
		y = 1
		relative_position_id = CHI_motorized_army
	
		cost = 6
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
			CR_GER_will_support = yes
		}
	
		bypass = {
			AND = {
				GER = {
					exists = no
				}
				SOV = {
					exists = no
				}
				NOT = {
					has_completed_focus = KMT_hire_soviet_designer
				}
			}
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
	
		completion_reward = {
			add_tech_bonus = {
				name = CHI_chinese_panzers
				bonus = 1.0
				uses = 1
				category = armor
			}
			add_breakthrough_progress = {
				specialization = specialization_land
				value = 0.25
			}
			custom_effect_tooltip = generic_skip_one_line_tt

			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = CHI_sino_german_technical_mission_organization

				mio:CHI_sino_german_technical_mission_organization = {
					add_mio_size = 1
					add_mio_funds = 500
				}
			}
			ELSE = {
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = german_chinese_tank_designer
			}
		}
	}

	focus = {
		id = KMT_tank_plant
		icon = GFX_CHI_develop_the_hanyan_arsenal
		prerequisite = { focus = KMT_chinese_panzers }
		x = 0
		y = 1
		relative_position_id = KMT_chinese_panzers
	
		cost = 6
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
			
		}
	
		bypass = {
			if = {
				GER = {
					exists = no
				}
			}
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
	
		complete_tooltip = {
			random_state = {
				limit = {
					has_state_flag = CHI_tank_plant_AF
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					is_fully_controlled_by = ROOT
					is_core_of = ROOT
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
				set_state_flag = CHI_tank_plant_AF
			}
		}
	}

	focus = {
		id = KMT_hire_soviet_designer
		icon = GFX_goal_generic_soviet_construction
		mutually_exclusive = { focus = KMT_chinese_panzers }
		prerequisite = { focus = CHI_motorized_army }
		x = 1
		y = 1
		relative_position_id = CHI_motorized_army
	
		cost = 6
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
			CR_SOV_will_support = yes
		}
	
		bypass = {
	
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
	
		completion_reward = {
			add_tech_bonus = {
				name = CHI_hire_soviet_designer
				bonus = 1.0
				uses = 1
				category = armor
			}
			
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = SOV_morozov_design_bureau_organization

				mio:SOV_morozov_design_bureau_organization = {
					add_mio_size = 1
					add_mio_funds = 500
				}
			}
			ELSE = {
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = CHI_morozov_design_bureau
			}
		}
	}

	focus = {
		id = KMT_joint_tank_development
		icon = GFX_KMT_joint_tank_development
		prerequisite = { focus = KMT_hire_soviet_designer }
		x = 0
		y = 1
		relative_position_id = KMT_hire_soviet_designer
	
		cost = 6
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
			CR_SOV_will_support = yes
		}
	
		bypass = {
			SOV = {
				exists = no
			}
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
	
		completion_reward = {
			SOV = { add_to_tech_sharing_group = CHI_joint_tank_development }
			add_to_tech_sharing_group = CHI_joint_tank_development
		}
	}

	focus = {
		id = KMT_experimental_mechanised_unit
		icon = GFX_KMT_experimental_mechanised_unit
		prerequisite = { focus = KMT_joint_tank_development focus = KMT_tank_plant }
		x = 1
		y = 1
		relative_position_id = KMT_tank_plant
	
		cost = 6
	
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 4
				tag = CHI
			}
		}
	
		available = {
			capital_scope = { is_fully_controlled_by = ROOT }
			has_tech = motorised_infantry
		}
	
		bypass = {
	
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
	
		completion_reward = {
			add_to_variable = { CHI_the_roc_land_army_mobilization_speed = 0.05 }
			custom_effect_tooltip = KMT_experimental_mechanised_unit_ideas_effects
			custom_effect_tooltip = CHI_experimental_mechanised_unit_effect
			if = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				if = {
					limit = {
						NOT = {
							has_completed_focus = KMT_chinese_panzers
							has_completed_focus = KMT_hire_soviet_designer
						}
					}
					add_equipment_subsidy = {
						cic = 500
						equipment_type = motorized_equipment
						seller_trigger = CHI_tank_seller_for_subsidy
					}
				}
				else_if = {
					limit = {
						has_completed_focus = KMT_chinese_panzers
					}
					add_equipment_subsidy = {
						cic = 500
						equipment_type = motorized_equipment
						seller_tags = { GER } 
					}
				}
				else_if = {
					limit = {
						has_completed_focus = KMT_hire_soviet_designer
					}
					add_equipment_subsidy = {
						cic = 500
						equipment_type = motorized_equipment
						seller_tags = { SOV } 
					}
				}
			}
			hidden_effect = {
				if = {
					limit = {
						tag = CHI
					}
					division_template = {
						name = "Experimental Mechanised Division"
						division_names_group = CHI_MEC_01
						priority = 2
						regiments = {
							light_armor = { x = 0 y = 0 }
							light_armor = { x = 0 y = 1 }
				
							motorized = { x = 1 y = 0 }
							motorized = { x = 1 y = 1 }
							motorized = { x = 1 y = 2 }
							motorized = { x = 1 y = 3 }
						}
						support = {
							
						}
					}
				}
				if = {
					limit = { NOT = { has_dlc = "No Step Back" } }
					if = {
						limit = {
							has_completed_focus = KMT_closer_ties_with_germany 
						}
						capital_scope = {
							create_unit = {
								division = "name = \"200. Mechanised Division\" division_template = \"Experimental Mechanised Division\" start_experience_factor = 1.0 force_equipment_variants = { light_tank_equipment_1 = { creator = \"GER\" } }" 
								owner = ROOT
							}
						}
					}
					if = {
						limit = {
							has_completed_focus = KMT_rapprochement_with_soviet_union
						}
						capital_scope = {
							create_unit = {
								division = "name = \"200. Mechanised Division\" division_template = \"Experimental Mechanised Division\" start_experience_factor = 1.0 force_equipment_variants = { light_tank_equipment_1 = { creator = \"SOV\" } }" 
								owner = ROOT
							}
						}
					}
				}
				else = {
					if = {
						limit = {
							has_completed_focus = KMT_closer_ties_with_germany 
						}
						capital_scope = {
							create_unit = {
								division = "name = \"200. Mechanised Division\" division_template = \"Experimental Mechanised Division\" start_experience_factor = 1.0 force_equipment_variants = { light_tank_chassis_1 = { creator = \"GER\" version_name = \"Panzer I Ausf. A\"} }" 
								owner = ROOT
							}
						}
					}
					if = {
						limit = {
							has_completed_focus = KMT_rapprochement_with_soviet_union
						}
						capital_scope = {
							create_unit = {
								division = "name = \"200. Mechanised Division\" division_template = \"Experimental Mechanised Division\" start_experience_factor = 1.0 force_equipment_variants = { light_tank_chassis_1 = { creator = \"SOV\" version_name = \"T-26TU mod. 1933\"} }" 
								owner = ROOT
							}
						}
					}
				}			
			}
		}
	}

	focus = {
		id = KMT_combined_arms_warfare
		icon = GFX_KMT_combined_arms_warfare
		prerequisite = { focus = KMT_experimental_mechanised_unit }
		x = 0
		y = 1
		relative_position_id = KMT_experimental_mechanised_unit
	
		cost = 6
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
		}
	
		bypass = {
	
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
	
		completion_reward = {
			add_to_variable = { CHI_the_roc_land_army_army_org_regain = 0.05 }
			add_to_variable = { CHI_the_roc_land_army_army_org_factor = 0.05 }
			custom_effect_tooltip = KMT_combined_arms_warfare_ideas_effects
			add_tech_bonus = {
				name = CHI_combined_arms_warfare
				bonus = 1.0
				uses = 1
				category = cat_mechanized_equipment
			}
		}
	}

	focus = {
		id = CHI_infantry_army
		icon = GFX_CHI_infantry_army
		prerequisite = { focus = CHI_NRA_land }
		x = 2
		y = 1
		relative_position_id = CHI_NRA_land

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			add_to_variable = { CHI_the_roc_land_army_training_time_factor = 0.05 }
			add_to_variable = { CHI_the_roc_land_army_army_org_regain = 0.03 }
			custom_effect_tooltip = CHI_infantry_army_ideas_effects
		}
	}

	focus = {
		id = KMT_small_arms_expertise
		icon = GFX_KMT_small_arms_expertise
		prerequisite = { focus = CHI_infantry_army }
		x = 0
		y = 1
		relative_position_id = CHI_infantry_army
	
		cost = 6
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
			
		}
	
		bypass = {
	
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
	
		completion_reward = {
			add_to_variable = { CHI_the_roc_land_army_unit_infantry_design_cost_factor = -0.1 }
			custom_effect_tooltip = KMT_small_arms_expertise_ideas_effects
			add_tech_bonus = {
				name = CHI_small_arms_expertise
				bonus = 1.0
				uses = 1
				category = infantry_weapons
			}
		}
	}

	focus = {
		id = KMT_elite_mountaineers
		icon = GFX_KMT_elite_mountaineers
		prerequisite = { focus = KMT_small_arms_expertise }
		x = 0
		y = 1
		relative_position_id = KMT_small_arms_expertise
	
		cost = 6
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
		}
	
		bypass = {
	
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
	
		completion_reward = {		
			add_to_variable = { CHI_the_roc_land_army_terrain_penalty_reduction = 0.05 }
			custom_effect_tooltip = KMT_elite_mountaineers_ideas_effects
			add_tech_bonus = {
				name = CHI_elite_mountaineers
				bonus = 1.0
				uses = 1
				category = mountaineers_tech
			}
			if = {
				limit = {
					has_tech = tech_mountaineers
				}
				custom_effect_tooltip = CHI_free_mountain_template_tt
				division_template = {
					name = "Chinese Mountain Division"
					division_names_group = CHI_MNT_01
					regiments = {
						mountaineers = { x = 0 y = 0 }
						mountaineers = { x = 0 y = 1 }
						mountaineers = { x = 0 y = 2 }
			
						mountaineers = { x = 1 y = 0 }
						mountaineers = { x = 1 y = 1 }
						mountaineers = { x = 1 y = 2 }
			
						mountaineers = { x = 2 y = 0 }
						artillery_brigade = { x = 2 y = 1 }
						artillery_brigade = { x = 2 y = 2 }
					}
					support = {
						artillery = { x = 0 y = 0 }
					}
				}
			}
		}
	}

	focus = {
		id = KMT_heavy_weapons
		icon = GFX_goal_generic_army_artillery2
		prerequisite = { focus = KMT_elite_mountaineers }
		x = 0
		y = 1
		relative_position_id = KMT_elite_mountaineers
		
		cost = 6
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
		}
	
		bypass = {
	
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
	
		completion_reward = {
			add_to_variable = { CHI_the_roc_land_army_unit_artillery_brigade_design_cost_factor = -0.1 }
			custom_effect_tooltip = KMT_heavy_weapons_ideas_effects
			add_ideas = KMT_heavy_weapons
			add_tech_bonus = {
				name = CHI_heavy_weapons
				bonus = 1.0
				uses = 1
				category = artillery
			}
		}
	}

	focus = {
		id = KMT_construction_battalions
		icon = GFX_KMT_construction_battalions
		prerequisite = { focus = KMT_heavy_weapons }
		x = 0
		y = 1
		relative_position_id = KMT_heavy_weapons
	
		cost = 6
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
		}
	
		bypass = {
	
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
	
		completion_reward = {
			add_to_variable = { CHI_the_roc_land_army_max_dig_in = 5 }
			add_to_variable = { CHI_the_roc_land_army_dig_in_speed_factor = 0.05 }
			add_to_variable = { CHI_the_roc_land_army_cas_damage_reduction = 0.05 }
			custom_effect_tooltip = KMT_construction_battalions_ideas_effects
			add_tech_bonus = {
				name = CHI_construction_battalions
				bonus = 1.0
				uses = 1
				category = engineers_tech
			}
		}
	}
	
	focus = {
		id = KMT_modern_logistics
		icon = GFX_goal_generic_army_motorized
		prerequisite = { focus = KMT_combined_arms_warfare }
		x = 0
		y = 1
		relative_position_id = KMT_combined_arms_warfare
	
		cost = 6
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
		}
	
		bypass = {
	
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
	
		completion_reward = {
			add_to_variable = { CHI_the_roc_land_army_army_org_regain = 0.05 }
			add_to_variable = { CHI_the_roc_land_army_army_land_reinforce_rate = 0.02 }
			custom_effect_tooltip = KMT_modern_logistics_ideas_effects
			every_army_leader = {
				add_logistics = 1
			}
			add_ideas = CHI_modern_logistics
			add_tech_bonus = {
				name = CHI_modern_logistics
				bonus = 1.0
				uses = 1
				technology = tech_field_hospital
				technology = tech_field_hospital2
				technology = tech_field_hospital3
				technology = tech_field_hospital4
				technology = tech_logistics_company
				technology = tech_logistics_company2
				technology = tech_logistics_company3
				technology = tech_logistics_company4
			}
		}
	}

	focus = {
		id = KMT_adaptable_army
		icon = GFX_CHI_liberation
		prerequisite = { focus = KMT_construction_battalions }
		x = 0
		y = 1
		relative_position_id = KMT_construction_battalions
	
		cost = 6
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
		}
	
		bypass = {
	
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
	
		completion_reward = {
			add_to_variable = { CHI_the_roc_land_army_heat_attrition_factor = -0.1 }
			add_to_variable = { CHI_the_roc_land_army_winter_attrition_factor = -0.1 }
			add_to_variable = { CHI_the_roc_land_army_acclimatization_cold_climate_gain_factor = 0.15 }
			add_to_variable = { CHI_the_roc_land_army_acclimatization_hot_climate_gain_factor = 0.15 }
			add_to_variable = { CHI_the_roc_land_army_special_forces_cap = 0.1 }
			custom_effect_tooltip = KMT_adaptable_army_ideas_effects
		}
	}

	focus = {
		id = CHI_NRA_navy
		icon = GFX_CHI_NRA_navy
		prerequisite = { focus = CHI_national_defense }
		x = 5
		y = 1
		relative_position_id = CHI_national_defense

		cost = 4

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			add_dynamic_modifier = { modifier = CHI_the_roc_navy_dynamic_modifier }
		}
	}

	focus = {
		id = KMT_train_marines
		icon = GFX_KMT_combined_arms_warfare
		prerequisite = { focus = CHI_NRA_navy }
		x = 2
		y = 2
		relative_position_id = CHI_NRA_navy
	
		cost = 6
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
		
		}
	
		bypass = {
	
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
	
		completion_reward = {
			add_to_variable = { CHI_the_roc_navy_naval_invasion_capacity = 10 }
			add_to_variable = { CHI_the_roc_navy_invasion_preparation = -0.1 }
			add_to_variable = { CHI_the_roc_navy_special_forces_cap = 0.1 }
			custom_effect_tooltip = KMT_train_marines_ideas_effects
			add_tech_bonus = {
				name = CHI_train_marines
				bonus = 1.0
				uses = 1
				category = marine_tech
			}
		}
	}

	focus = {
		id = KMT_investment_into_shipbuilding
		icon = GFX_KMT_investment_into_shipbuilding
		prerequisite = { focus = CHI_NRA_navy }
		x = 0
		y = 1
		relative_position_id = CHI_NRA_navy
	
		cost = 5
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
			any_state = {
				is_controlled_by = ROOT
				is_coastal = yes
			}
		}
	
		complete_tooltip = {
			navy_experience = 25
			custom_effect_tooltip = KMT_investment_into_shipbuilding_ideas_effects
			random_state = {
				limit = {
					has_state_flag = CHI_investment_into_shipbuilding_DY
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
		}
	
		completion_reward = {
			navy_experience = 25
			add_to_variable = { CHI_the_roc_navy_navy_refit_ic_cost = -0.05 }
			add_to_variable = { CHI_the_roc_navy_repair_speed_factor = 0.05 }
			custom_effect_tooltip = KMT_investment_into_shipbuilding_ideas_effects
			random_owned_controlled_state = {
				limit = {
					is_coastal = yes
					free_building_slots = {
						building = dockyard
						size > 2
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
				set_state_flag = CHI_investment_into_shipbuilding_DY
			}
		}
	}
	
	focus = {
		id = KMT_order_destroyers
		icon = GFX_KMT_order_destroyers
		prerequisite = { focus = KMT_investment_into_shipbuilding }
		x = 0
		y = 1
		relative_position_id = KMT_investment_into_shipbuilding
	
		cost = 6
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
			OR = {
				CR_USA_will_support = yes
				CR_JAP_will_support = yes
			}
		}
	
		bypass = {
			AND = {
				USA = {
					exists = no
				}
				JAP = {
					exists = no
				}
			}
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
	
		completion_reward = {
			add_tech_bonus = {
				name = CHI_order_destroyers
				bonus = 1.0
				uses = 2
				category = dd_tech
			}
		}
	}
	
	focus = {
		id = KMT_modern_submarines
		icon = GFX_KMT_modern_submarines
		mutually_exclusive = { focus = KMT_light_cruiser_project }
		prerequisite = { focus = KMT_order_destroyers }
		x = 1
		y = 1
		relative_position_id = KMT_order_destroyers
	
		cost = 6
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
			CR_JAP_will_support = yes
		}
	
		bypass = {
	
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
	
		completion_reward = {
			add_ideas = chi_submarine_bonus
			add_to_variable = { CHI_the_roc_navy_navy_visibility = -0.05 }
			custom_effect_tooltip = KMT_modern_submarines_ideas_effects
			add_tech_bonus = {
				name = CHI_modern_submarines
				bonus = 1.0
				uses = 1
				category = ss_tech
			}
		}
	}
	
	focus = {
		id = KMT_coastal_patrol_planes
		icon = GFX_KMT_coastal_patrol_planes
		prerequisite = { focus = KMT_modern_submarines }
		x = 0
		y = 1
		relative_position_id = KMT_modern_submarines
	
		cost = 6
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
			CR_JAP_will_support = yes
		}
	
		bypass = {
			JAP = {
				exists = no
			}
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
	
		completion_reward = {
			add_to_variable = { CHI_the_roc_navy_positioning = 0.1 }
			custom_effect_tooltip = KMT_coastal_patrol_planes_ideas_effects
			add_tech_bonus = {
				name = CHI_coastal_patrol_planes
				bonus = 1.0
				uses = 1
				category = naval_bomber
			}
		}
	}

	focus = {
		id = KMT_light_cruiser_project
		icon = GFX_KMT_cruiser_project
		mutually_exclusive = { focus = KMT_modern_submarines }
		prerequisite = { focus = KMT_order_destroyers }
		x = -1
		y = 1
		relative_position_id = KMT_order_destroyers
	
		cost = 6
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
			CR_USA_will_support = yes
		}
	
		bypass = {
			AND = {
				USA = {
					exists = no
				}
				JAP = {
					exists = no
				}
				NOT = {
					has_completed_focus = KMT_modern_submarines
				}
			}
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
	
		completion_reward = {
			add_ideas = chi_cruiser_bonus_1
			add_to_variable = { CHI_the_roc_navy_screening_efficiency = 0.1 }
			custom_effect_tooltip = KMT_light_cruiser_project_ideas_effects
			add_tech_bonus = {
				name = CHI_light_cruiser_project
				bonus = 1.0
				uses = 1
				category = cl_tech
			}
		}
	}
	
	focus = {
		id = KMT_heavy_cruiser_project
		icon = GFX_KMT_cruiser_project
		prerequisite = { focus = KMT_light_cruiser_project }
		x = 0
		y = 1
		relative_position_id = KMT_light_cruiser_project
	
		cost = 6
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
			CR_USA_will_support = yes
		}
	
		bypass = {
			USA = {
				exists = no
			}
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
	
		completion_reward = {
			swap_ideas = {
				add_idea = chi_cruiser_bonus_2
				remove_idea = chi_cruiser_bonus_1
			}
			add_tech_bonus = {
				name = CHI_heavy_cruiser_project
				bonus = 1.0
				uses = 1
				category = ca_tech
			}
		}
	}
	
	focus = {
		id = KMT_naval_aviation
		icon = GFX_goal_generic_navy_carrier
		prerequisite = { focus = KMT_heavy_cruiser_project focus = KMT_coastal_patrol_planes }
		x = 1
		y = 1
		relative_position_id = KMT_heavy_cruiser_project
	
		cost = 6
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
			
		}
	
		bypass = {
	
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
	
		completion_reward = {
			add_to_variable = { CHI_the_roc_navy_naval_coordination = 0.1 }
			custom_effect_tooltip = KMT_naval_aviation_ideas_effects
			add_breakthrough_progress = {
				specialization = specialization_naval
				value = 0.25
			}
			add_tech_bonus = {
				name = CHI_naval_aviation
				bonus = 1.0
				uses = 2
				category = cv_tech
			}
			activate_mission_tooltip = CHI_build_a_carrier
		}
	}
	
	focus = {
		id = KMT_carrier_air_wing
		icon = GFX_KMT_local_fighter_production
		prerequisite = { focus = KMT_naval_aviation }
		x = 0
		y = 1
		relative_position_id = KMT_naval_aviation
	
		cost = 6
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
			
		}
	
		bypass = {
	
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
	
		completion_reward = {
			add_tech_bonus = {
				name = CHI_naval_aviation
				bonus = 1.0
				uses = 2
				category = naval_air
			}
		}
	}

	focus = {
		id = CHI_NRA_airforce
		icon = GFX_CHI_NRA_airforce
		prerequisite = { focus = CHI_national_defense }
		x = -5
		y = 1
		relative_position_id = CHI_national_defense

		cost = 4

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			add_ideas = CHI_the_roc_airforce_1
		}
	}

	focus = {
		id = KMT_camco
		icon = GFX_CHI_taiyuan_arsenal
		prerequisite = { focus = CHI_NRA_airforce }
		x = 0
		y = 1
		relative_position_id = CHI_NRA_airforce
	
		cost = 6
	
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 4
				tag = CHI
			}
		}
	
		available = {
		
		}
	
		bypass = {
	
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
	
		completion_reward = {
			hidden_effect = {
				swap_ideas = {
					add_idea = CHI_the_roc_airforce_2
					remove_idea = CHI_the_roc_airforce_1
				}
				add_dynamic_modifier = { modifier = CHI_the_roc_plane_factory_modifier }
			}
			custom_effect_tooltip = KMT_camco_ideas_effects
			
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = CHI_camco_medium_organization
				mio:CHI_camco_medium_organization = {
					add_mio_size = 1
					add_mio_funds = 500
				}
			}

			ELSE = {
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = CHI_camco_1
			}
		}
	}

	focus = {
		id = KMT_local_fighter_production
		icon = GFX_KMT_local_fighter_production
		prerequisite = { focus = KMT_camco }
		x = 0
		y = 1
		relative_position_id = KMT_camco
	
		cost = 6
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
			if = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				mio:CHI_camco_medium_organization = {
					has_mio_size > 3
				}
			}
			else = {
				has_idea = CHI_camco_1
			}
		}
	
		bypass = {
	
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
	
		completion_reward = {
			custom_effect_tooltip = KMT_local_fighter_production_ideas_effects
			hidden_effect = {
				add_ideas = chi_fighter_plane_bonus
				swap_ideas = {
					add_idea = CHI_the_roc_airforce_3
					remove_idea = CHI_the_roc_airforce_2
				}
			}
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = CHI_camco_fighter_organization
				mio:CHI_camco_fighter_organization = {
					add_mio_size = 1
					add_mio_funds = 500
				}
			}

			ELSE = {
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = CHI_camco_2
			}
		}
	}

	focus = {
		id = KMT_the_chu_x_po
		icon = GFX_KMT_the_chu_x_po
		prerequisite = { focus = KMT_local_fighter_production }
		x = 0
		y = 1
		relative_position_id = KMT_local_fighter_production
	
		cost = 6
	
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 4
				tag = CHI
			}
		}
	
		available = {
			if = {
				limit = {
					has_dlc = "By Blood Alone"
				}
				NOT = { has_tech = advanced_small_airframe }
			}
			else = {
				NOT = { has_tech = fighter3 }
			}
		}
	
		bypass = {
			if = {
				limit = {
					has_dlc = "By Blood Alone"
				}
				has_tech = advanced_small_airframe
			}
			else = {
				has_tech = fighter3
			}
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
	
		completion_reward = {
			swap_ideas = {
				add_idea = CHI_the_roc_airforce_4
				remove_idea = CHI_the_roc_airforce_3
			}
			if = {
				limit = {
					has_dlc = "By Blood Alone"
				}
				add_tech_bonus = {
					name = CHI_the_chu_x_po
					ahead_reduction = 2
					technology = advanced_small_airframe
				}
			}
			else = {
				add_tech_bonus = {
					name = CHI_the_chu_x_po
					ahead_reduction = 2
					technology = fighter3				
				}
			}
		}
	}

	focus = {
		id = KMT_local_bomber_production
		icon = GFX_KMT_local_bomber_production
		prerequisite = { focus = KMT_camco }
		x = -2
		y = 1
		relative_position_id =  KMT_camco
	
		cost = 6
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
			if = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				mio:CHI_camco_fighter_organization = {
					has_mio_size > 3
				}
			}
			else = {
				has_idea = CHI_camco_2
			}
		}
	
		bypass = {
	
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
	
		completion_reward = {
			add_ideas = CHI_the_roc_airforce_5
			hidden_effect = {
				add_ideas = chi_bomber_plane_bonus
			}
			IF = {
				limit = {
					has_dlc = "Arms Against Tyranny"
				}
				custom_effect_tooltip = available_mio_tt
				show_mio_tooltip = CHI_camco_bomber_organization
				mio:CHI_camco_bomber_organization = {
					add_mio_size = 1
					add_mio_funds = 500
				}
			}

			ELSE = {
				custom_effect_tooltip = available_designer
				show_ideas_tooltip = CHI_camco_3
			}
		}
	}

	focus = {
		id = KMT_tactical_air_effort
		icon = GFX_goal_generic_CAS
		prerequisite = { focus = KMT_local_bomber_production }
		mutually_exclusive = { focus = KMT_strategic_air_effort }
		x = 1
		y = 2
		relative_position_id = KMT_local_bomber_production
		cost = 6
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }
		completion_reward = {
			swap_ideas = {
				add_idea = CHI_the_roc_airforce_7
				remove_idea = CHI_the_roc_airforce_5
			}
			add_doctrine_cost_reduction = {
				name = op_dest_bonus
				cost_reduction = 0.25
				uses = 2
				category = battlefield_support_tree
			}
			add_tech_bonus = {
				name = bomber_bonus
				bonus = 1.0
				uses = 1
				category = tactical_bomber
				category = cas_bomber			
			}
		}
	}

	focus = {
		id = KMT_strategic_air_effort
		icon = GFX_goal_generic_air_bomber
		prerequisite = { focus = KMT_local_bomber_production }
		mutually_exclusive = { focus = KMT_tactical_air_effort }
		x = -1
		y = 2
		relative_position_id = KMT_local_bomber_production
		cost = 6
		ai_will_do = {
			factor = 1
		}

		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }
		completion_reward = {
			swap_ideas = {
				add_idea = CHI_the_roc_airforce_6
				remove_idea = CHI_the_roc_airforce_5
			}
			# Balance research bonus for 2 techs in battlefield_support_tree
			add_doctrine_cost_reduction = {
				name = strat_dest_bonus
				cost_reduction = 0.25
				uses = 2
				category = battlefield_support_tree
			}
			add_tech_bonus = {
				name = bomber_bonus
				bonus = 1.0
				uses = 1
				category = cat_strategic_bomber
			}
		}
	}

	focus = {
		id = KMT_air_modernisations_programme
		icon = GFX_KMT_air_modernisations_programme
		prerequisite = { focus = KMT_tactical_air_effort focus = KMT_strategic_air_effort }
		prerequisite = { focus = KMT_the_chu_x_po }

		x = 0
		y = 2
		relative_position_id = KMT_the_chu_x_po
		cost = 6

		ai_will_do = {
			factor = 10
		}

		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }
		completion_reward = {
			custom_effect_tooltip = KMT_air_modernisations_programme_ideas_effects
			hidden_effect = {
				if = {
					limit = {
						has_idea = CHI_the_roc_airforce_7
					}
					add_ideas = CHI_the_roc_airforce_8
					remove_ideas = CHI_the_roc_airforce_7
					remove_ideas = CHI_the_roc_airforce_4
					
					else_if = {
						limit = {
							has_idea = CHI_the_roc_airforce_6
						}
						add_ideas = CHI_the_roc_airforce_9
						remove_ideas = CHI_the_roc_airforce_6
						remove_ideas = CHI_the_roc_airforce_4
					}
				}
				remove_ideas = chi_fighter_plane_bonus
				remove_ideas = chi_bomber_plane_bonus
				add_ideas = chi_all_plane_bonus
			}
			add_doctrine_cost_reduction = {
				name = KMT_air_modernisations_programme
				cost_reduction = 0.5
				uses = 1
				category = air_doctrine
			}
		}
	}

	focus = {
		id = KMT_nuclear_institute
		icon = GFX_KMT_nuclear_institute
		prerequisite = { focus = KMT_air_modernisations_programme }
		x = 0
		y = 1
		relative_position_id = KMT_air_modernisations_programme
		cost = 6
		ai_will_do = {
			factor = 10
		}

		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }
		completion_reward = {
			add_tech_bonus = {
				name = KMT_nuclear_institute
				bonus = 1.5
				uses = 1
				ahead_reduction = 1
				category = nuclear
			}
		}
	}

	focus = {
		id = KMT_modern_war
		icon = GFX_CHI_develop_the_hanyan_arsenal
		prerequisite = { focus = KMT_nuclear_institute focus = KMT_carrier_air_wing }
		prerequisite = { focus = KMT_modern_logistics }
		prerequisite = { focus = KMT_adaptable_army }
		x = 2
		y = 1
		relative_position_id = KMT_modern_logistics
		cost = 6
		ai_will_do = {
			factor = 10
		}

		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_RESEARCH }
		completion_reward = {
			add_ideas = KMT_modern_war
		}
	}

	focus = {
		id = CHI_60_divisions_plan
		icon = GFX_CHI_60_divisions_plan
		prerequisite = { focus = CHI_NRA_land }
		x = 0
		y = 1
		relative_position_id = CHI_NRA_land

		cost = 6

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_MANPOWER }
		completion_reward = {
			unlock_decision_tooltip = CRF_CHI_60_divisions_plan
		}
	}

	focus = {
		id = CHI_bureau_of_investigation_and_statistics
		icon = GFX_CHI_juntong
		prerequisite = { focus = CHI_military_affairs_commission }
		x = 4
		y = 1
		relative_position_id = CHI_military_affairs_commission

		cost = 6

		ai_will_do = {
			factor = 4
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_STABILITY }
		completion_reward = {
			if = {
				limit = {
					has_intelligence_agency = no
				}
				create_intelligence_agency = yes
			}
			add_stability = 0.1
			custom_effect_tooltip = available_political_advisor
			if = {
				limit = {
					has_dlc = "La Resistance"
				}
				show_ideas_tooltip = CHI_dai_li_political_advisor
				add_ideas = CHI_juntong
			}
			else = {
				show_ideas_tooltip = CHI_dai_li_wtt_political_advisor
			}
		}
	}

	focus = {
		id = CHI_whampoa_military_academy
		icon = GFX_focus_chi_whampoa_military_academy
		prerequisite = { focus = CHI_bureau_of_investigation_and_statistics }
		x = 0
		y = 1
		relative_position_id = CHI_bureau_of_investigation_and_statistics

		cost = 6

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			every_army_leader = {
				add_planning = 1
			}
			add_ideas = CHI_huangpu_military_academy
		}
	}

	focus = {
		id = CHI_three_principles_of_the_people
		icon = GFX_three_principle_focus
		x = 18
		y = 0
		relative_position_id = CHI_military_affairs_commission

		cost = 5

		ai_will_do = {
			factor = 4
		}

		available = {
		
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {

		}

		search_filters = { FOCUS_FILTER_STABILITY }
		completion_reward = {
			add_stability = 0.05
		}
	}

	focus = {
		id = CHI_welfare
		icon = GFX_CHI_walfare
		prerequisite = { focus = CHI_three_principles_of_the_people }
		x = 6
		y = 1
		relative_position_id = CHI_three_principles_of_the_people

		cost = 5

		ai_will_do = {
			factor = 4
		}

		available = {
			NOT = {
				has_idea = CHI_hyper_inflation_5
			}
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {

		}

		search_filters = { FOCUS_FILTER_WAR_SUPPORT }
		completion_reward = {
			add_war_support = 0.1
			CHI_hyper_inflation_level_up = yes
		}
	}

	focus = {
		id = CHI_refugee_relief_agency
		icon = GFX_refugee_relief_agency
		prerequisite = { focus = CHI_welfare }
		x = -1
		y = 1
		relative_position_id = CHI_welfare

		cost = 5

		ai_will_do = {
			factor = 4
		}

		available = {
			NOT = {
				has_idea = CHI_hyper_inflation_5
			}
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {

		}

		search_filters = { FOCUS_FILTER_WAR_SUPPORT }
		completion_reward = {
			add_war_support = 0.1
			CHI_hyper_inflation_level_up = yes
		}
	}

	focus = {
		id = CHI_land_tax_reform
		icon = GFX_CHI_land_tax_reform
		prerequisite = { focus = CHI_welfare }
		x = 1
		y = 1
		relative_position_id = CHI_welfare

		cost = 5

		ai_will_do = {
			factor = 4
		}

		available = {
			has_hyper_inflation = yes
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {

		}

		search_filters = { FOCUS_FILTER_CHI_INFLATION }
		completion_reward = {
			CHI_hyper_inflation_level_down = yes 
		}
	}

	focus = {
		id = CHI_new_life_movement
		icon = GFX_CHI_new_life_movement
		prerequisite = { focus = CHI_refugee_relief_agency }
		x = -1
		y = 2
		relative_position_id = CHI_welfare

		cost = 5

		ai_will_do = {
			factor = 4
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {

		}

		search_filters = { FOCUS_FILTER_STABILITY }
		completion_reward = {
			add_stability = 0.1
		}
	}

	focus = {
		id = CHI_unemployment_assistance
		icon = GFX_CHI_unemployment_assistance
		prerequisite = { focus = CHI_land_tax_reform }
		x = 1
		y = 2
		relative_position_id = CHI_welfare

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
			NOT = {
				has_idea = CHI_hyper_inflation_5
			}
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {

		}

		search_filters = { FOCUS_FILTER_WAR_SUPPORT }
		completion_reward = {			
			add_war_support = 0.1
			CHI_hyper_inflation_level_up = yes
		}
	}

	focus = {
		id = CHI_free_hospitals
		icon = GFX_CHI_free_hospitals
		prerequisite = { focus = CHI_new_life_movement }
		prerequisite = { focus = CHI_unemployment_assistance }
		x = 0
		y = 3
		relative_position_id = CHI_welfare

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
			NOT = {
				has_idea = CHI_hyper_inflation_5
			}
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {

		}

		search_filters = { FOCUS_FILTER_WAR_SUPPORT }
		completion_reward = {
			add_war_support = 0.1
			CHI_hyper_inflation_level_up = yes
		}
	}

	focus = {
		id = CHI_rural_schooling
		icon = GFX_CHI_rural_schooling
		prerequisite = { focus = CHI_free_hospitals }
		x = 0
		y = 4
		relative_position_id = CHI_welfare

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
			amount_research_slots < 5
			NOT = {
				has_idea = CHI_hyper_inflation_5
			}
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {

		}

		search_filters = { FOCUS_FILTER_RESEARCH }
		completion_reward = {
			add_research_slot = 1
			CHI_hyper_inflation_level_up = yes
		}
	}

	focus = {
		id = CHI_democracy
		icon = GFX_CHI_democracy
		prerequisite = { focus = CHI_three_principles_of_the_people }
		x = 0
		y = 1
		relative_position_id = CHI_three_principles_of_the_people

		cost = 3

		ai_will_do = {
			factor = 1
		}

		available = {
			
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {

		}

		search_filters = { FOCUS_FILTER_POLITICAL }
		completion_reward = {
			add_political_power = 120
		}
	}

	focus = {
		id = CRF_CHI_inter_party_coordination
		icon = GFX_CHI_party_coordination_council
		prerequisite = { focus = CHI_democracy }
		x = 0
		y = 1
		relative_position_id = CHI_democracy

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
			controls_state = 613
			controls_state = 328
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			add_ideas = CRF_CHI_inter_party_coordination
		}
	}

	focus = {
		id = CHI_national_convention
		icon = GFX_CHI_national_convention
		prerequisite = { focus = CRF_CHI_inter_party_coordination }
		x = 0
		y = 1
		relative_position_id = CRF_CHI_inter_party_coordination

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			country_event= chiconst.1
			add_ideas = CHI_convention_1
		}
	}
	
	focus = {
		id = CHI_make_constitutional
		icon = GFX_CHI_constitutional_reform
		prerequisite = { focus = CHI_national_convention }
		x = 0
		y = 1
		relative_position_id = CHI_national_convention

		cost = 3

		ai_will_do = {
			factor = 1
		}

		available = {
			
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_WAR_SUPPORT }
		completion_reward = {
			add_ideas = CHI_constitutional
		}
	}

	focus = {
		id = CHI_republicanism
		icon = GFX_CHI_republican
		prerequisite = { focus = CHI_make_constitutional }
		x = -2
		y = 1
		relative_position_id = CHI_make_constitutional

		cost = 2

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no


		completion_reward = {
			every_country = {
				limit = {
					is_major = yes
					has_government = democratic
				}
				add_opinion_modifier = {
					target = ROOT
					modifier = CHI_republicanism
				}
			}
		}
	}

	focus = {
		id = CHI_convention_election
		icon = GFX_CHI_national_convention
		prerequisite = { focus = CHI_republicanism }
		x = 0
		y = 1
		relative_position_id = CHI_republicanism

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
			is_subject = no
			OR = {
				# end war
				has_global_flag = end_of_second_sino_japanese_war
				# or if no war, owns manchuria
				custom_trigger_tooltip = {
					tooltip = jap_select_non_fascism_route_tt
					owns_manchuria = yes
				}
			}
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			hidden_effect = {
				swap_ideas = {
					add_idea = CHI_convention_2
					remove_idea = CHI_convention_1
				}	
				add_dynamic_modifier = { modifier = CHI_the_roc_convention_modifier }
			}
			custom_effect_tooltip = CHI_convention_election_ideas_effects
			news_event = chiconst.2
		}
	}

	focus = {
		id = CHI_first_election
		icon = GFX_CHI_democracy
		prerequisite = { focus = CHI_convention_election }
		prerequisite = { focus = CHI_legislative_yuan }
		x = 0
		y = 1
		relative_position_id = CHI_convention_election

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
			is_subject = no
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			hidden_effect = {
				set_country_flag = CHI_had_first_election
				remove_country_leader_role = {
					character = CRF_CHI_chiang_kaishek
					ideology = tp_tutelage
				}
				remove_country_leader_role = {
					character = CHI_weng_wenhao
					ideology = tp_constitutional
				}
				add_country_leader_role = {
					Character = CRF_CHI_chiang_kaishek
					Promote_leader = yes
					Country_leader = {
						ideology = tp_constitutional_neutrality
						desc = "POLITICS_CHIANG_KAI-SHEK_DESC"
						expire = "1965.1.1.1"
						traits = {
							generallissimo
							president_of_roc
						}
					}
				}
				add_country_leader_role = {
					Character = CHI_weng_wenhao
					Country_leader = {
						ideology = tp_constitutional_neutrality
						desc = "POLITICS_WENG_WENHAO_DESC"
						expire = "1965.1.1.1"
						traits = {
							president_of_roc
						}
					}
				}
				add_country_leader_role = {
					Character = CRF_CHI_chiang_kaishek
					Country_leader = {
						ideology = tp_constitutional
						desc = "POLITICS_CHIANG_KAI-SHEK_DESC"
						expire = "1965.1.1.1"
						traits = {
							generallissimo
							president_of_roc
						}
					}
				}
				add_country_leader_role = {
					Character = CHI_zhang_lan
					Promote_leader = yes
					Country_leader = {
						ideology = tp_constitutional
						desc = "POLITICS_ZHANG_LAN_DESC"
						expire = "1965.1.1.1"
						traits = {
							president_of_roc
						}
					}
				}
				add_country_leader_role = {
					Character = CHI_weng_wenhao
					Country_leader = {
						ideology = tp_constitutional
						desc = "POLITICS_WENG_WENHAO_DESC"
						expire = "1965.1.1.1"
						traits = {
							president_of_roc
						}
					}
				}
			}
			country_event = chielection.1
			custom_effect_tooltip = CHI_first_election_effects
		}
	}

	focus = {
		id = CHI_make_sure_five_yuan
		icon = GFX_CHI_make_sure_five_yuan
		prerequisite = { focus = CHI_make_constitutional }
		x = 0
		y = 1
		relative_position_id = CHI_make_constitutional

		cost = 2

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			add_stability = 0.1
		}
	}

	focus = {
		id = CHI_executive_yuan
		icon = GFX_CHI_executive_yuan
		prerequisite = { focus = CHI_make_sure_five_yuan }
		x = 4
		y = 1
		relative_position_id = CHI_make_sure_five_yuan

		cost = 3

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_POLITICAL }
		completion_reward = {
			add_ideas = CRF_CHI_executive_yuan_1
		}
	}

	focus = {
		id = CHI_judicial_yuan
		icon = GFX_CHI_judicial_yuan
		prerequisite = { focus = CHI_make_sure_five_yuan }
		x = 6
		y = 1
		relative_position_id = CHI_make_sure_five_yuan

		cost = 3

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_STABILITY }
		completion_reward = {
			add_ideas = CHI_judicial_yuan
		}
	}

	focus = {
		id = CHI_control_yuan
		icon = GFX_CHI_control_yuan
		prerequisite = { focus = CHI_make_sure_five_yuan }
		x = 8
		y = 1
		relative_position_id = CHI_make_sure_five_yuan

		cost = 3

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_STABILITY }
		completion_reward = {
			add_ideas = CHI_control_yuan
		}
	}

	focus = {
		id = CHI_examination_yuan
		icon = GFX_focus_chi_examination_yuan
		prerequisite = { focus = CHI_make_sure_five_yuan }
		x = 2
		y = 1
		relative_position_id = CHI_make_sure_five_yuan

		cost = 3

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_MANPOWER }
		completion_reward = {
			swap_ideas = {
				add_idea = CHI_examination_yuan
				remove_idea = CHI_ineffective_bureaucracy
			}
		}
	}

	focus = {
		id = CHI_legislative_yuan
		icon = GFX_focus_chi_legislative_yuan
		prerequisite = { focus = CHI_make_sure_five_yuan }
		x = 0
		y = 1
		relative_position_id = CHI_make_sure_five_yuan

		cost = 3

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_POLITICAL }
		completion_reward = {
			add_ideas = CHI_legal_yuan
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = CHI_kwong_jiang_political_advisor
		}
	}

	focus = {
		id = CHI_foreign_affair_reform
		icon = GFX_CHI_foreign_affair_reform
		# prerequisite = { focus = CHI_legislative_yuan }
		prerequisite = { focus = CHI_executive_yuan }
		x = 0
		y = 1
		relative_position_id = CHI_executive_yuan

		cost = 3

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			every_country = {
				add_opinion_modifier = {
					target = ROOT
					modifier = CHI_cooperation_with_the_nationalists_positive
				}
			}
		}
	}

	focus = {
		id = CHI_establish_economic_affairs
		icon = GFX_KMT_economic_affairs
		prerequisite = { focus = CHI_executive_yuan }
		prerequisite = { focus = CHI_forced_loans }
		x = 6
		y = 1
		relative_position_id = CHI_executive_yuan

		cost = 3

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			swap_ideas = {
				remove_idea = CRF_CHI_executive_yuan_1
				add_idea = CRF_CHI_executive_yuan_2
			}
		}
	}

	focus = {
		id = CHI_affair_in_europe
		icon = GFX_CHI_affair_in_europe
		prerequisite = { focus = CHI_foreign_affair_reform }
		x = 0
		y = 1
		relative_position_id = CHI_foreign_affair_reform

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {
			always = yes
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			custom_effect_tooltip = chi_focus_disabled
		}
	}

	focus = {
		id = CHI_affair_in_asia_pacific
		icon = GFX_CHI_affair_in_asia_pacific
		prerequisite = { focus = CHI_foreign_affair_reform }
		x = 2
		y = 1
		relative_position_id = CHI_foreign_affair_reform

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {
			always = yes
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			custom_effect_tooltip = chi_focus_disabled
		}
	}

	focus = {
		id = CHI_affair_in_america
		icon = GFX_CHI_affair_in_america
		prerequisite = { focus = CHI_foreign_affair_reform }
		x = 4
		y = 1
		relative_position_id = CHI_foreign_affair_reform

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {
			always = yes
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			custom_effect_tooltip = chi_focus_disabled
		}
	}

	focus = {
		id = CHI_nationalism
		icon = GFX_CHI_nationalism
		prerequisite = { focus = CHI_three_principles_of_the_people }
		x = -6
		y = 1
		relative_position_id = CHI_three_principles_of_the_people

		cost = 3

		ai_will_do = {
			factor = 4
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_STABILITY }
		completion_reward = {
			add_stability = 0.1
		}
	}

	focus = {
		id = CHI_foreign_threats
		icon = GFX_CHI_foreign_threats
		prerequisite = { focus = CHI_nationalism }
		mutually_exclusive = { focus = CHI_prioritize_the_interior }
		x = -2
		y = 1
		relative_position_id = CHI_nationalism

		cost = 5

		ai_will_do = {
			factor = 4
		}

		available = {
			
		}

		bypass = {
			CHI = {
				is_in_faction_with = PRC
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_WAR_SUPPORT }
		completion_reward = {
			add_war_support = 0.1
		}
	}

	focus = {
		id = CHI_prioritize_the_interior
		icon = GFX_CHI_prioritize_the_interior
		prerequisite = { focus = CHI_nationalism }
		mutually_exclusive = { focus = CHI_foreign_threats }
		x = 0
		y = 1
		relative_position_id = CHI_nationalism

		cost = 5

		ai_will_do = {
			factor = 1
			modifier = {
				AND = {
					MAN = {	exists = no }
					PRC = { exists = no }
				}
				factor = 0
			}
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {

		}

		search_filters = { FOCUS_FILTER_STABILITY }
		completion_reward = {
			add_stability = 0.05
		}
	}

	focus = {
		id = CHI_united_front
		icon = GFX_focus_chi_united_front
		prerequisite = { focus = CHI_foreign_threats }
		x = 0
		y = 1
		relative_position_id = CHI_foreign_threats

		cost = 6

		ai_will_do = {
			factor = 1
		}

		available = {
			is_subject = no
			is_in_faction = no
		}

		bypass = {
			is_in_faction_with = PRC
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {

		}

		completion_reward = {
			CHI = {
				set_rule = { can_create_factions = yes }
				create_faction = chinese_united_front
			}
			PRC = {
				country_event = generic.5
			}
		}
	}

	focus = {
		id = CHI_pick_a_fight_with_japan
		icon = GFX_CHI_pick_a_fight_with_japan
		prerequisite = { focus = CHI_united_front focus = CHI_anti_communism }
		x = 1
		y = 1
		relative_position_id = CHI_united_front

		cost = 6

		ai_will_do = {
			factor = 1
			modifier = {
				JAP = {
					has_government = democratic
				}
				factor = 0
			}
		}

		available = {
			NOT = { is_in_faction_with = JAP }
			is_subject = no
		}

		bypass = {
			OR = {
				has_war_with = JAP
				has_war_with = MAN
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {

		}

		completion_reward = {
			if = {
				limit = {
					MAN = {
						OR = {
							is_in_faction_with = JAP
							is_puppet_of = JAP
						}
					}
				}
				create_wargoal = {
					type = annex_everything
					target = MAN
					expire = 0
				}
				else = {
					create_wargoal = {
						type = annex_everything
						target = JAP
						expire = 0
					}	
				}
			}
			hidden_effect = {
				news_event = { id = wtt_news.35 days = 1}
			}
		}
	}

	focus = {
		id = CHI_anti_communism
		icon = GFX_CHI_anti_communism
		prerequisite = { focus = CHI_prioritize_the_interior }
		x = 0
		y = 1
		relative_position_id = CHI_prioritize_the_interior

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
			is_subject = no
			NOT = { has_government = communism }
			any_country = {
				OR = {
					tag = YUN
					tag = SIK
					tag = GXC
					tag = SHX
					tag = XSM
					tag = TIB
					tag = PRC
				}
				has_government = communism
			}
		}

		bypass = {
			OR = {
				is_in_faction_with = PRC
				NOT = { 
					any_country = {
						OR = {
							tag = YUN
							tag = SIK
							tag = GXC
							tag = SHX
							tag = XSM
							tag = TIB
							tag = PRC
						}
						has_government = communism
					}
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {

		}

		completion_reward = {
			if = {		
				limit = {
					SIK = {
						has_government = communism
					}
				}
				create_wargoal = {
					type = annex_everything
					target = SIK
					expire = 0
				}
			}
			if = {		
				limit = {
					TIB = {
						has_government = communism
					}
				}
				create_wargoal = {
					type = annex_everything
					target = TIB
					expire = 0
				}
			}
			if = {
				limit = {
					PRC = {
						has_government = communism
					}
				}
				ROOT = {
					create_wargoal = {
						type = annex_everything
						target = PRC
						expire = 0
					}
				}
			}
			if = {
				limit = {
					YUN = {
						has_government = communism
					}
				}
				ROOT = {
					create_wargoal = {
						type = annex_everything
						target = YUN
						expire = 0
					}
				}
			}
			if = {
				limit = {
					SHX = {
						has_government = communism
					}
				}
				ROOT = {
					create_wargoal = {
						type = annex_everything
						target = SHX
						expire = 0
					}
				}
			}
			if = {
				limit = {
					GXC = {
						has_government = communism
					}
				}
				ROOT = {
					create_wargoal = {
						type = annex_everything
						target = GXC
						expire = 0
					}
				}
			}
			if = {
				limit = {
					XSM = {
						has_government = communism
					}
				}
				ROOT = {
					create_wargoal = {
						type = annex_everything
						target = XSM
						expire = 0
					}
				}
			}
		}
	}

	focus = {
		id = KMT_subjugate_the_warlords
		icon = GFX_CHI_subjugate_the_warlords
		prerequisite = { focus = CHI_prioritize_the_interior }
		x = 1
		y = 2
		relative_position_id = CHI_prioritize_the_interior

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
			is_subject = no
		}

		bypass = {
			GXC = {
				OR = {
					exists = no
					is_subject_of = ROOT
					has_war_with = ROOT
				}
			}
			YUN = {
				OR = {
					exists = no
					is_subject_of = ROOT
					has_war_with = ROOT
				}
			}
			SHX = {
				OR = {
					exists = no
					is_subject_of = ROOT
					has_war_with = ROOT
				}
			}
			XSM = {
				OR = {
					exists = no
					is_subject_of = ROOT
					has_war_with = ROOT
				}
			}
			SIK = {
				OR = {
					exists = no
					is_subject_of = ROOT
					has_war_with = ROOT
				}
			}
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {

		}

		search_filters = { FOCUS_FILTER_ANNEXATION }
		completion_reward = {
			every_other_country = {
				limit = {
					OR = {
						tag = GXC
						tag = YUN
						tag = SHX
						tag = XSM
						tag = SIK
					}
				}
				country_event = { id = chi_int.1 }
			}
			unlock_decision_category_tooltip = CR_CHI_integrate_the_warlords
		}
	}

	focus = {
		id = CHI_war_of_resistance
		icon = GFX_CHI_war_of_resistance
		prerequisite = { focus = CHI_pick_a_fight_with_japan }
		x = 0
		y = 1
		relative_position_id = CHI_pick_a_fight_with_japan

		cost = 6

		ai_will_do = {
			factor = 4
		}

		available = {
			NOT = {
				has_idea = CHI_army_corruption_1
			}		
		}

		bypass = {
			has_offensive_war_with = JAP
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			add_ideas = CHI_war_of_resistance
		}
	}

	focus = {
		id = CHI_industrial_evacuations
		icon = GFX_CHI_industrial
		prerequisite = { focus = CHI_war_of_resistance }
		x = -2
		y = 1
		relative_position_id = CHI_war_of_resistance

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
			has_war = yes
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_INDUSTRY }
		completion_reward = {
			unlock_decision_category_tooltip = CHI_industrial_evacuations			
			set_variable = { var = CHI_industrial_evacuations_amount_factor value = 0.75 } #Ratio for how many building are moved. Change CHI_industrial_evacuations_add_AF and CHI_industrial_evacuations_add_IC if you change the value
		}
	}

	focus = {
		id = CHI_war_of_national_liberation
		icon = GFX_CHI_liberation
		prerequisite = { focus = CHI_war_of_resistance }
		x = 2
		y = 1
		relative_position_id = CHI_war_of_resistance

		cost = 6

		ai_will_do = {
			factor = 1
		}

		available = {
			NOT = {
				has_idea = CHI_army_corruption_2
			}
			has_defensive_war = yes
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			if = {
				limit = {
					has_idea = CHI_war_of_resistance
				}
				swap_ideas = {
					remove_idea = CHI_war_of_resistance
					add_idea = CHI_war_of_resistance_2
				}
				else = {
					add_ideas = CHI_war_of_national_liberation
				}
			}
		}
	}

	focus = {
		id = CHI_scorched_earth_tactics
		icon = GFX_CHI_scorched_earth_tactics
		prerequisite = { focus = CHI_war_of_resistance }
		x = 0
		y = 1
		relative_position_id = CHI_war_of_resistance

		cost = 5

		ai_will_do = {
			factor = 4
		}

		available = {
			has_war = yes
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			unlock_decision_tooltip = CHI_scorched_earth_tactics
		}
	}

	focus = {
		id = CHI_war_of_anti_imperialism
		icon = GFX_CHI_war_of_anti_imperialism
		prerequisite = { focus = CHI_war_of_national_liberation }
		x = 0
		y = 1
		relative_position_id = CHI_war_of_national_liberation

		cost = 6

		ai_will_do = {
			factor = 1
		}

		available = {
			#OR = {
			#	has_war_with = JAP
			#	has_war_with = MAN
			#}
			if = {
				limit = {
					is_ai = yes
				}
				NOT = {
					has_idea = CHI_army_corruption_1
					has_idea = CHI_army_corruption_2
					has_idea = CHI_army_corruption_3
				}
				else = { has_country_flag = CHI_lessons_of_war_completed }
			}
		}

		bypass = {

		}

		cancel_if_invalid = no
		continue_if_invalid = yes
		available_if_capitulated = no

		completion_reward = {
			add_ideas = CHI_war_of_anti_imperialism
		}
	}

	focus = {
		id = CHI_nation_independence
		icon = GFX_CHI_party_coordination_council
		prerequisite = { focus = CHI_nationalism }
		prerequisite = { focus = CHI_first_election }
		x = 2
		y = 7
		relative_position_id = CHI_nationalism

		cost = 4

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			add_country_leader_trait = chaser_of_sun_yat_sen_1
			if = {
				limit = {
					CHI_zhang_lan = { is_country_leader = yes }
				}
				set_country_flag = zhang_chaser_added
			}
			if = {
				limit = {
					CRF_CHI_chiang_kaishek = { is_country_leader = yes }
					has_government = democratic
				}
				set_country_flag = chiang_democratic_chaser_added
			}
			if = {
				limit = {
					CRF_CHI_chiang_kaishek = { is_country_leader = yes }
					has_government = neutrality
				}
				set_country_flag = chiang_neutrality_chaser_added
			}
			if = {
				limit = {
					CHI_weng_wenhao = { is_country_leader = yes }
					has_government = democratic
				}
				set_country_flag = weng_democratic_chaser_added
			}
			if = {
				limit = {
					CHI_weng_wenhao = { is_country_leader = yes }
					has_government = neutrality
				}
				set_country_flag = weng_neutrality_chaser_added
			}
		}
	}

	focus = {
		id = KMT_renegotiate_the_unequal_treaties
		icon = GFX_KMT_renegotiate_the_unequal_treaties
		prerequisite = { focus = CHI_nation_independence } 
		prerequisite = { focus = CHI_foreign_affair_reform } 
		x = 3
		y = 1
		relative_position_id = CHI_nation_independence
	
		cost = 5
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
		}
	
		bypass = {
			
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
	
		completion_reward = {
			remove_ideas = CHI_nine_power_treaty
			swap_ruler_traits = {
				remove = chaser_of_sun_yat_sen_1
				add = chaser_of_sun_yat_sen_2
			}
			if = {
				limit = {
					CHI_zhang_lan = { is_country_leader = yes }
				}
				set_country_flag = zhang_chaser_added_2
			}
			if = {
				limit = {
					CRF_CHI_chiang_kaishek = { is_country_leader = yes }
					has_government = democratic
				}
				set_country_flag = chiang_democratic_chaser_added_2
			}
			if = {
				limit = {
					CRF_CHI_chiang_kaishek = { is_country_leader = yes }
					has_government = neutrality
				}
				set_country_flag = chiang_neutrality_chaser_added_2
			}
			if = {
				limit = {
					CHI_weng_wenhao = { is_country_leader = yes }
					has_government = democratic
				}
				set_country_flag = weng_democratic_chaser_added_2
			}
			if = {
				limit = {
					CHI_weng_wenhao = { is_country_leader = yes }
					has_government = neutrality
				}
				set_country_flag = weng_neutrality_chaser_added_2
			}
			unlock_decision_tooltip = negotiate_macau
			unlock_decision_tooltip = negotiate_zhanjiang
			unlock_decision_tooltip = negotiate_hongkong	
		}
	}

	#########################################################################################################################

	focus = {
		id = KMT_expand_to_foreign
		icon = GFX_KMT_expand_to_foreign
		prerequisite = { focus = KMT_renegotiate_the_unequal_treaties }
		x = 3
		y = 1
		relative_position_id = KMT_renegotiate_the_unequal_treaties

		cost = 6

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			swap_ruler_traits = {
				remove = chaser_of_sun_yat_sen_2
				add = chaser_of_sun_yat_sen_3
			}
			if = {
				limit = {
					CHI_zhang_lan = { is_country_leader = yes }
				}
				set_country_flag = zhang_chaser_added_3
			}
			if = {
				limit = {
					CRF_CHI_chiang_kaishek = { is_country_leader = yes }
					has_government = democratic
				}
				set_country_flag = chiang_democratic_chaser_added_3
			}
			if = {
				limit = {
					CRF_CHI_chiang_kaishek = { is_country_leader = yes }
					has_government = neutrality
				}
				set_country_flag = chiang_neutrality_chaser_added_3
			}
			if = {
				limit = {
					CHI_weng_wenhao = { is_country_leader = yes }
					has_government = democratic
				}
				set_country_flag = weng_democratic_chaser_added_3
			}
			if = {
				limit = {
					CHI_weng_wenhao = { is_country_leader = yes }
					has_government = neutrality
				}
				set_country_flag = weng_neutrality_chaser_added_3
			}
		}
	}

	focus = {
		id = CHI_national_security_bureau
		icon = GFX_CHI_national_security_bureau
		prerequisite = { focus = CHI_affair_in_america }
		prerequisite = { focus = CHI_affair_in_europe }
		prerequisite = { focus = CHI_affair_in_asia_pacific }
		prerequisite = { focus = KMT_expand_to_foreign }
		x = 0
		y = 4
		relative_position_id = CHI_affair_in_america

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			add_ideas = CHI_national_security_bureau
		}
	}

	focus = {
		id = CHI_operation_in_back
		icon = GFX_CHI_operation_in_back
		prerequisite = { focus = CHI_national_security_bureau }
		x = 0
		y = 1
		relative_position_id = CHI_national_security_bureau

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			add_ideas = CHI_operation_in_back
		}
	}

	focus = {
		id = KMT_one_china_policy
		icon = GFX_KMT_one_china_policy
		prerequisite = { focus = KMT_renegotiate_the_unequal_treaties }
		x = -3
		y = 1
		relative_position_id = KMT_renegotiate_the_unequal_treaties
	
		cost = 3
	
		ai_will_do = {
			factor = 1
			modifier = {
				num_of_factories < 50
				factor = 0
			}
		}
	
		available = {
	
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
	
		completion_reward = {
			ROOT = { country_event = china.12138 }
			if = { 
				limit = {
					WTT_is_ROOT_current_leader_of_china = yes
				}
				set_rule = { can_create_factions = yes }
			}
			if = {
				limit = {
					any_other_country = {
						is_literally_china = yes
						is_in_faction_with = ROOT
					} 
				} 
				if = {
					limit = {
						any_other_country = {
							NOT = { is_literally_china = yes }
							is_in_faction_with = ROOT
						} 
						ROOT = { is_faction_leader = yes }
					} 
					every_other_country = {
								limit = {
									NOT = { is_literally_china = yes }
									is_in_faction_with = ROOT
								}
								ROOT = { remove_from_faction = PREV }
					}
				}
				remove_from_faction = ROOT
			}
			hidden_effect = {
				#news_event = { id = wtt_news.46 days = 3 }
			}
			every_other_country = {
				limit = {
					is_literally_china = yes
					NOT = { has_war_with = ROOT }
					NOT = { is_subject_of = ROOT }
					NOT = { ROOT = { has_wargoal_against = PREV } }
					NOT = { tag = ROOT }
				}
				ROOT = {
					create_wargoal = {
						type = annex_everything
						target = PREV
						expire = 0
					}
				}
			}
		}
	}
	
	focus = {
		id = KMT_integrate_the_tibet
		icon = GFX_KMT_integrate_the_tibet
		prerequisite = { focus = KMT_one_china_policy }
		mutually_exclusive = { focus = KMT_reclaim_tibet }
		x = -1
		y = 1
		relative_position_id = KMT_one_china_policy
	
		cost = 5
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
			ROOT = {
					is_subject = no
			}
			#if = {
			#	limit = {
			#		country_exists = TIB
			#	}
			#	TIB = { NOT = { has_war_with = ROOT } }	
			#}
			OR = {
				322 = { 
					owner = { 
						NOT = { 
							has_war_with = ROOT 
							tag = ROOT
						} 
					} 
				}
				601 = { 
					owner = { 
						NOT = { 
							has_war_with = ROOT 
							tag = ROOT
						} 
					} 
				}
				757 = { 
					owner = { 
						NOT = { 
							has_war_with = ROOT 
							tag = ROOT
						} 
					} 
				}
				758 = { 
					owner = { 
						NOT = { 
							has_war_with = ROOT 
							tag = ROOT
						} 
					} 
				}
			}
		}
	
		bypass = {
			OR = {
				TIB = { is_subject_of = ROOT }
				AND = {
					owns_state = 322
					owns_state = 601
					owns_state = 757
					owns_state = 758
				}
			}
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
	
		completion_reward = {
			add_political_power = 100
			custom_effect_tooltip = negotiate_with_tibet_tooltip
		}
	}
	
	focus = {
		id = KMT_reclaim_tibet
		icon = GFX_Reclaim_Tibet
		prerequisite = { focus = KMT_one_china_policy }
		mutually_exclusive = { focus = KMT_integrate_the_tibet }
		x = 1
		y = 1
		relative_position_id = KMT_one_china_policy
	
		cost = 5
	
		ai_will_do = {
			factor = 1
			modifier = {
				any_country = {
					is_major = yes
					is_in_faction_with = TIB
				}
				factor = 0
			}
		}
	
		available = {
			ROOT = { is_subject = no }
			OR = {
				NOT = { owns_state = 322 }
				NOT = { owns_state = 601 }
				NOT = { owns_state = 757 }
				NOT = { owns_state = 758 }
			}
		}
	
		bypass = {
			OR = {
				NOT = { owns_state = 322 }
				NOT = { owns_state = 601 }
				NOT = { owns_state = 757 }
				NOT = { owns_state = 758 }
			}
			if = {
				limit = {
					322 = { NOT = { is_owned_by = ROOT } }
				}
				322 = { 
					owner = { 
						has_war_with = ROOT
					} 
				}
			}
			if = {
				limit = {
					601 = { NOT = { is_owned_by = ROOT } }
				}
				601 = { 
					owner = { 
						has_war_with = ROOT
					} 
				}
			}
			if = {
				limit = {
					757 = { NOT = { is_owned_by = ROOT } }
				}
				757 = { 
					owner = { 
						has_war_with = ROOT
					} 
				}
			}
			if = {
				limit = {
					758 = { NOT = { is_owned_by = ROOT } }
				}
				758 = { 
					owner = { 
						has_war_with = ROOT
					} 
				}
			}
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
	
		completion_reward = {
			every_other_country = {
				limit = {
					NOT = { has_war_with = ROOT }
					OR = {
						owns_state = 322
						owns_state = 601
						owns_state = 757
						owns_state = 758
					}
				}
				ROOT = {
					create_wargoal = {
						type = take_core_state
						generator = { 322 601 757 758 }
						target = PREV
						expire = 0
					}
				}
			}
		}
	}
	
	focus = {
		id = KMT_reclaim_southern_tibet
		icon = GFX_Negotiate_RAJ
		prerequisite = { focus = KMT_integrate_the_mongolia focus = KMT_reclaim_mongolia }
		x = 0
		y = 3
		relative_position_id = KMT_one_china_policy
	
		cost = 5
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
					ROOT = {
							is_subject = no
					}
		}
	
		bypass = {
			OR = {
			434 = { is_owned_by = CHI } 
			434 = { is_owned_by = PRC }
			}
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
	
		completion_reward = {
			add_political_power = 100
			unlock_decision_tooltip = negotiate_with_raj
		}
	}
	
	focus = {
		id = KMT_reclaim_mongolia
		icon = GFX_Reclaim_MON
		prerequisite = { focus = KMT_integrate_the_tibet focus = KMT_reclaim_tibet }
		mutually_exclusive = { focus = KMT_integrate_the_mongolia }
		x = 1
		y = 2
		relative_position_id = KMT_one_china_policy
	
		cost = 5
	
		ai_will_do = {
			factor = 1
			modifier = {
				any_country = {
					is_major = yes
					is_in_faction_with = MON
				}
				factor = 0
			}
		}
	
		available = {
			ROOT = { is_subject = no }
			OR = {
				NOT = { owns_state = 329 }
				NOT = { owns_state = 818 }
				NOT = { owns_state = 817 }
				NOT = { owns_state = 820 }
				NOT = { owns_state = 330 }
				NOT = { owns_state = 819 }
			}
		}
	
		bypass = {
			OR = {
				NOT = { owns_state = 329 }
				NOT = { owns_state = 818 }
				NOT = { owns_state = 817 }
				NOT = { owns_state = 820 }
				NOT = { owns_state = 330 }
				NOT = { owns_state = 819 }
			}
			if = {
				limit = {
					329 = { NOT = { is_owned_by = ROOT } }
				}
				329 = { 
					owner = { 
						has_war_with = ROOT
					} 
				}
			}
			if = {
				limit = {
					818 = { NOT = { is_owned_by = ROOT } }
				}
				818 = { 
					owner = { 
						has_war_with = ROOT
					} 
				}
			}
			if = {
				limit = {
					817 = { NOT = { is_owned_by = ROOT } }
				}
				817 = { 
					owner = { 
						has_war_with = ROOT
					} 
				}
			}
			if = {
				limit = {
					820 = { NOT = { is_owned_by = ROOT } }
				}
				820 = { 
					owner = { 
						has_war_with = ROOT
					} 
				}
			}
			if = {
				limit = {
					330 = { NOT = { is_owned_by = ROOT } }
				}
				330 = { 
					owner = { 
						has_war_with = ROOT
					} 
				}
			}
			if = {
				limit = {
					819 = { NOT = { is_owned_by = ROOT } }
				}
				819 = { 
					owner = { 
						has_war_with = ROOT
					} 
				}
			}
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
	
		completion_reward = {
			every_other_country = {
				limit = {
					NOT = { has_war_with = ROOT }
					OR = {
						owns_state = 329
						owns_state = 818
						owns_state = 817
						owns_state = 820
						owns_state = 330
						owns_state = 819
					}
				}
				ROOT = {
					create_wargoal = {
						type = take_core_state
						generator = { 329 818 817 820 330 819 }
						target = PREV
						expire = 0
					}
				}
			}
		}
	}
	
	focus = {
		id = KMT_anti_imperialism
		icon = GFX_KMT_anti_imperialism
		prerequisite = { focus = KMT_expand_to_foreign }
		mutually_exclusive = { focus = KMT_imperial_legacy }
		x = -2
		y = 1
		relative_position_id = KMT_expand_to_foreign
	
		cost = 5
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
			is_subject = no
			NOT = { has_government = fascism }
		}
	
		bypass = {
	
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
	
		completion_reward = {
			add_war_support = 0.1
			swap_ruler_traits = {
				remove = chaser_of_sun_yat_sen_3
				add = chaser_of_sun_yat_sen_5
			}
			if = {
				limit = {
					CHI_zhang_lan = { is_country_leader = yes }
				}
				set_country_flag = zhang_chaser_added_5
			}
			if = {
				limit = {
					CRF_CHI_chiang_kaishek = { is_country_leader = yes }
					has_government = democratic
				}
				set_country_flag = chiang_democratic_chaser_added_5
			}
			if = {
				limit = {
					CRF_CHI_chiang_kaishek = { is_country_leader = yes }
					has_government = neutrality
				}
				set_country_flag = chiang_neutrality_chaser_added_5
			}
			if = {
				limit = {
					CHI_weng_wenhao = { is_country_leader = yes }
					has_government = democratic
				}
				set_country_flag = weng_democratic_chaser_added_5
			}
			if = {
				limit = {
					CHI_weng_wenhao = { is_country_leader = yes }
					has_government = neutrality
				}
				set_country_flag = weng_neutrality_chaser_added_5
			}
		}
	}
	
	focus = {
		id = KMT_guidance_and_support
		icon = GFX_KMT_guidance_and_support
		prerequisite = { focus = KMT_anti_imperialism }
		x = 1
		y = 1
		relative_position_id = KMT_anti_imperialism
	
		cost = 5
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
			any_owned_state = {
				OR = {
					is_core_of = VIN
					is_core_of = CAM
					is_core_of = LAO
				}
				is_fully_controlled_by = ROOT
			}
		}
	
		bypass = {
			country_exists = VIN
			country_exists = CAM
			country_exists = LAO
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
	
		completion_reward = {
			release_autonomy = {
				target = VIN
				autonomy_state = autonomy_puppet
				freedom_level=0.5
			}
			release_autonomy = {
				target = CAM
				autonomy_state = autonomy_puppet
				freedom_level=0.5
			}
			release_autonomy = {
				target = LAO
				autonomy_state = autonomy_puppet
				freedom_level=0.5
			}
		}
	}
	
	focus = {
		id = KMT_commit_to_korean_independence
		icon = GFX_KMT_commit_to_korean_independence
		prerequisite = { focus = KMT_guidance_and_support }
		x = 1
		y = 2
		relative_position_id = KMT_anti_imperialism
	
		cost = 5
	
		ai_will_do = {
			factor = 0
			# factor = 1
			# modifier = {
			# 	OR = { 
			# 		525 = { 
			# 			CONTROLLER = { 
			# 				is_ai = no
			# 			}	
			# 		}
			# 		527 = { 
			# 			CONTROLLER = { 
			# 				is_ai = no
			# 			}	
			# 		}
			# 	}
			# 	factor = 0
			# }
		}
	
		available = {
	
		}
	
		bypass = {
			OR = {
			country_exists = KOR
				527 = {
					CONTROLLER = {
						NOT = { tag = ROOT }
						is_in_faction_with = ROOT
					}
				}
				525 = {
					CONTROLLER = {
						NOT = { tag = ROOT }
						is_in_faction_with = ROOT
					}
				}
			}
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
	
		completion_reward = {
			if = {
				limit = {
					OR = {
						527 = { is_owned_and_controlled_by = ROOT }
						525 = { is_owned_and_controlled_by = ROOT }
					}
				}
				activate_mission_tooltip = CHI_release_korea
			}
			else = {
				527 = {
					CONTROLLER = {
						ROOT = {
							create_wargoal = {
								type = take_state_focus
								target = PREV
								expire = 0
								generator = { 527 }
							}
						}
					}
				}
				#Don't give wargoal on same country twice
				if = {
					limit = {
						NOT = { 525 = { CONTROLLER = { controls_state = 527 } } }
					}
					525 = {
						CONTROLLER = {
							ROOT = {
								create_wargoal = {
									type = take_state_focus
									target = PREV
									expire = 0
									generator = { 525 }
								}
							}
						}
					}
				}
			}
		}
	}
	
	focus = {
		id = KMT_indian_cooperation
		icon = GFX_KMT_indian_cooperation
		prerequisite = { focus = KMT_anti_imperialism }
		x = -1
		y = 2
		relative_position_id = KMT_anti_imperialism
	
		cost = 5
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
			OR = {
				is_faction_leader = yes
				RAJ = { is_subject = yes }
			}
			RAJ = { NOT = { has_war_with = ROOT } }		
		}
	
		bypass = {
	
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
	
		completion_reward = {
			if = {
				limit = {
					ROOT = { is_faction_leader = yes }
					RAJ = { is_subject = no }
				}
				RAJ = { country_event = { id = generic.5 } }
			}
			else = {
				RAJ = { country_event = wtt_china_shared.1 }
			}
		}
	}
	
	focus = {
		id = KMT_integrate_the_mongolia
		icon = GFX_KMT_integrate_the_mongolia
		mutually_exclusive = { focus = KMT_reclaim_mongolia }
		prerequisite = { focus = KMT_integrate_the_tibet focus = KMT_reclaim_tibet }
		x = -1
		y = 2
		relative_position_id = KMT_one_china_policy
	
		cost = 5
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
					ROOT = {
							is_subject = no
					}				
					OR = {
						329 = { 
							owner = { 
								NOT = { 
									has_war_with = ROOT 
									tag = ROOT
								} 
							} 
						}
						818 = { 
							owner = { 
								NOT = { 
									has_war_with = ROOT 
									tag = ROOT
								} 
							} 
						}
						817 = { 
							owner = { 
								NOT = { 
									has_war_with = ROOT 
									tag = ROOT
								} 
							} 
						}
						820 = { 
							owner = { 
								NOT = { 
									has_war_with = ROOT 
									tag = ROOT
								} 
							} 
						}
						330 = { 
							owner = { 
								NOT = { 
									has_war_with = ROOT 
									tag = ROOT
								} 
							} 
						}
						819 = { 
							owner = { 
								NOT = { 
									has_war_with = ROOT 
									tag = ROOT
								} 
							} 
						}
					}
		}
	
		bypass = {
			OR = {
				AND = {
					MON = { is_subject_of = ROOT }
					TAN = { is_subject_of = ROOT }
				}
				AND = {
					owns_state = 329
					owns_state = 818
					owns_state = 817
					owns_state = 820
					owns_state = 330
					owns_state = 819
				}
			}		
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
	
		completion_reward = {
							if = {
								custom_effect_tooltip = negotiate_with_outer_mongolia_tooltip
								add_political_power = 50
							}
							if = {
								custom_effect_tooltip = negotiate_with_tuva_tooltip
								add_political_power = 50
							}					
		}
	}
	
	focus = {
		id = KMT_imperial_legacy
		icon = GFX_KMT_imperial_legacy
		prerequisite = { focus = KMT_expand_to_foreign }
		mutually_exclusive = { focus = KMT_anti_imperialism }
		x = 2
		y = 1
		relative_position_id = KMT_expand_to_foreign
	
		cost = 5
	
		ai_will_do = {
			factor = 0
		}
	
		available = {
	
		}
	
		bypass = {
	
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
	
		completion_reward = {
			add_stability = 0.1
			swap_ruler_traits = {
				remove = chaser_of_sun_yat_sen_3
				add = chaser_of_sun_yat_sen_4
			}
			if = {
				limit = {
					CHI_zhang_lan = { is_country_leader = yes }
				}
				set_country_flag = zhang_chaser_added_4
			}
			if = {
				limit = {
					CRF_CHI_chiang_kaishek = { is_country_leader = yes }
					has_government = democratic
				}
				set_country_flag = chiang_democratic_chaser_added_4
			}
			if = {
				limit = {
					CRF_CHI_chiang_kaishek = { is_country_leader = yes }
					has_government = neutrality
				}
				set_country_flag = chiang_neutrality_chaser_added_4
			}
			if = {
				limit = {
					CHI_weng_wenhao = { is_country_leader = yes }
					has_government = democratic
				}
				set_country_flag = weng_democratic_chaser_added_4
			}
			if = {
				limit = {
					CHI_weng_wenhao = { is_country_leader = yes }
					has_government = neutrality
				}
				set_country_flag = weng_neutrality_chaser_added_4
			}
		}
	}
	
	focus = {
		id = KMT_overlordship_over_indochina
		icon = GFX_KMT_overlordship_over_indochina
		prerequisite = { focus = KMT_imperial_legacy }
		x = 0
		y = 1
		relative_position_id = KMT_imperial_legacy
	
		cost = 5
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
	
		}
	
		bypass = {
			controls_state = 671
			controls_state = 670
			controls_state = 286
			controls_state = 741
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
	
		completion_reward = {
			every_other_country = {
				limit = {
					OR = {
						owns_state = 671
						owns_state = 670
						owns_state = 286
						owns_state = 741
						controls_state = 671
						controls_state = 670
						controls_state = 286
						controls_state = 741
					}
					NOT = { is_puppet_of = ROOT }
				}
				ROOT = {
					create_wargoal = {
						type = take_state_focus
						target = PREV
						expire = 0
						generator = { 671 670 286 741 } #TODO_WTT_CODE - ignore states that are not owned or controlled by country
					}
				}
			}
			activate_mission_tooltip = CHI_overlordship_over_indochina
			hidden_effect = {
				news_event = { id = wtt_news.47 days = 3}
			}
		}
	}
	
	focus = {
		id = KMT_dominate_japan
		icon = GFX_KMT_dominate_japan
		prerequisite = { focus = KMT_imperial_legacy }
		x = 2
		y = 1
		relative_position_id = KMT_imperial_legacy
	
		cost = 5
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
			NOT = { has_war_with = JAP }
			NOT = { is_subject_of = JAP }
		}
	
		bypass = {
			JAP = { is_subject_of = ROOT }
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
	
		completion_reward = {
			JAP = { country_event = { id = kmt_diplo.1 } }
		}
	}

	focus = {
		id = KMT_war_with_SOV
		icon = GFX_focus_attack_soviet
		prerequisite = { focus = KMT_dominate_japan }
		x = 0
		y = 1
		relative_position_id = KMT_dominate_japan

		cost = 5

		ai_will_do = {
			factor = 1
		}

		available = {
			NOT = { has_war_with = SOV }
			NOT = { is_subject_of = SOV }
		}
	
		bypass = {
			SOV = { is_subject_of = ROOT }
		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			create_wargoal = {
					type = puppet_wargoal_focus
					target = SOV	
					expire = 0
			}
		}
	}
	
	focus = {
		id = KMT_secure_the_peninsula
		icon = GFX_secure_peninsula
		prerequisite = { focus = KMT_overlordship_over_indochina }
		x = 0
		y = 2
		relative_position_id = KMT_imperial_legacy
	
		cost = 5
	
		ai_will_do = {
			factor = 1
		}
	
		available = {
			OR = {
				527 = {
					CONTROLLER = {
						NOT = { tag = ROOT }
						NOT = { is_in_faction_with = ROOT }
					}
				}
				525 = {
					CONTROLLER = {
						NOT = { tag = ROOT }
						NOT = { is_in_faction_with = ROOT }
					}
				}
			}
		}
	
		bypass = {
				527 = {
					CONTROLLER = {
						OR = {
							tag = ROOT
							is_puppet_of = ROOT
						}
					}
				}
				525 = {
					CONTROLLER = {
						OR = {
							tag = ROOT
							is_puppet_of = ROOT
						}
					}
				}
		}
	
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no
	
		completion_reward = {
			if = {
				limit = {
					NOT = {
						527 = {
							CONTROLLER = {
								tag = ROOT	
							}
						}
					}
				}
				527 = {
					CONTROLLER = {
						ROOT = {
							create_wargoal = {
								type = take_state_focus
								target = PREV
								expire = 0
								generator = { 527 }
							}
						}
					}
				}
			}
			#Don't give wargoal on same country twice
			if = {
				limit = {
					NOT = {
						525 = {
							CONTROLLER = {
								OR = {
									controls_state = 527
									tag = ROOT								
								}
							}
						}
					}
				}
				525 = {
					CONTROLLER = {
						ROOT = {
							create_wargoal = {
								type = take_state_focus
								target = PREV
								expire = 0
								generator = { 525 }
							}
						}
					}
				}
			}
		}
	}

	focus = {
		id = CHI_forced_conscription
		icon = GFX_CHI_forced_conscription
		prerequisite = { focus = CHI_scorched_earth_tactics }
		x = 0
		y = 1
		relative_position_id = CHI_scorched_earth_tactics

		cost = 6

		ai_will_do = {
			factor = 4
			modifier = {
				has_manpower > 1000000
				factor = 0
			}
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_MANPOWER }
		completion_reward = {
			add_ideas = CHI_forced_conscription
			add_to_variable = { CHI_the_roc_land_army_mobilization_laws_cost_factor = -0.1 }
			add_to_variable = { CHI_the_roc_land_army_army_org_factor = -0.03 }
			custom_effect_tooltip = CHI_forced_conscription_ideas_effects
		}
	}

	focus = {
		id = CHI_dare_to_die_corps
		icon = GFX_CHI_dare_to_die_corp
		prerequisite = { focus = CHI_forced_conscription }
		x = 0
		y = 2
		relative_position_id = CHI_scorched_earth_tactics

		cost = 6

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		completion_reward = {
			custom_effect_tooltip = CHI_50_cheaper_force_attack
		}
	}

	focus = {
		id = CHI_unified_industrial_planning
		icon = GFX_CHI_unified_industrial_planning
		x = 12
		y = 0
		relative_position_id =  CHI_three_principles_of_the_people

		cost = 6

		ai_will_do = {
			factor = 4
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_INDUSTRY }
		completion_reward = {
			add_tech_bonus = {
				name = CHI_unified_industrial_planning
				bonus = 1.0
				uses = 2
				category = industry
			}
		}
	}

	focus = {
		id = CHI_financial_policy
		icon = GFX_CHI_financial_policy
		prerequisite = { focus = CHI_unified_industrial_planning }
		x = -2
		y = 1
		relative_position_id = CHI_unified_industrial_planning

		cost = 6

		ai_will_do = {
			factor = 4
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		
		search_filters = { FOCUS_FILTER_INDUSTRY }
		completion_reward = {
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = CHI_t_v_soong_political_advisor
		}
	}

	focus = {
		id = CHI_price_controls
		icon = GFX_CHI_price_controls
		prerequisite = { focus = CHI_financial_policy }
		x = 0
		y = 1
		relative_position_id = CHI_financial_policy

		cost = 6

		ai_will_do = {
			factor = 4
		}

		available = {
			has_hyper_inflation = yes
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_CHI_INFLATION }
		completion_reward = {
			CHI_hyper_inflation_level_down = yes
		}
	}

	focus = {
		id = CHI_grain_tax
		icon = GFX_CHI_grain_tax
		prerequisite = { focus = CHI_price_controls }
		x = 1
		y = 2
		relative_position_id = CHI_price_controls

		cost = 6

		ai_will_do = {
			factor = 1
		}

		available = {

		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_WAR_SUPPORT }
		completion_reward = {
			add_ideas = CHI_grain_tax
		}
	}

	focus = {
		id = CHI_reform_the_national_bank
		icon = GFX_CHI_money
		prerequisite = { focus = CHI_price_controls }
		x = 0
		y = 1
		relative_position_id = CHI_price_controls

		cost = 6

		ai_will_do = {
			factor = 1
		}

		available = {
			has_hyper_inflation = yes
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_CHI_INFLATION }
		completion_reward = {
			CHI_hyper_inflation_level_down = yes
		}
	}

	focus = {
		id = CHI_forced_loans
		icon = GFX_CHI_forced_loans
		prerequisite = { focus = CHI_reform_the_national_bank }
		x = 0
		y = 2
		relative_position_id = CHI_reform_the_national_bank

		cost = 6

		ai_will_do = {
			factor = 1
		}

		available = {
			has_hyper_inflation = yes
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_CHI_INFLATION }
		completion_reward = {
			unlock_decision_tooltip = CHI_forced_loans
		}
	}

	focus = {
		id = CHI_national_construction_commission
		icon = GFX_CHI_unified_industrial_planning
		cost = 5

		relative_position_id = CHI_establish_economic_affairs
		x = 0
		y = 1

		prerequisite = { focus = CHI_establish_economic_affairs }
		ai_will_do = {
			base = 1
			modifier = {
				factor = 0.5
				has_war = yes
			}
			modifier = {
				factor = 2
				has_war = no
			}
		}
		completion_reward = {
			unlock_decision_category_tooltip = CRF_CHI_national_construction_plan
			if = { #give them train tech if they don't have it already at this point
				limit = { NOT = { has_tech = basic_train } }
				set_technology = { basic_train = 1 }
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = CHI_create_the_nec
		icon = GFX_CHI_unemployment_assistance
		cost = 5

		relative_position_id = CHI_national_construction_commission
		x = 1
		y = 1

		prerequisite = { focus = CHI_national_construction_commission }
		ai_will_do = {
			base = 250
			modifier = {
				factor = 0.5
				has_war = yes
			}
			modifier = {
				factor = 2
				has_war = no
			}
		}
		completion_reward = {
			custom_effect_tooltip = CHI_more_NCC_decisions_tt
			add_tech_bonus = {
				name = CHI_state_capitalism_plan
				category = excavation_tech
				bonus = 1
				uses = 1
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = CHI_embrace_autarky
		icon = GFX_KMT_econimic_zone
		cost = 3

		relative_position_id = CHI_national_construction_commission
		x = -1
		y = 1

		prerequisite = { focus = CHI_national_construction_commission }
		ai_will_do = {
			base = 100
			modifier = {
				factor = 0.5
				has_war = yes
			}
			modifier = {
				factor = 2
				has_war = no
			}
		}
		completion_reward = {
			custom_effect_tooltip = CHI_state_capitalism_tt
			hidden_effect = {
				if = {
					limit = { controls_state = 608 } #Beijing
					608 = {
						add_dynamic_modifier = {
							modifier = CHI_state_capitalism_plan
						}
					}
				}
				if = {
					limit = { controls_state = 596 } #Hangzhou
					596 = {
						add_dynamic_modifier = {
							modifier = CHI_state_capitalism_plan
						}
					}
				}
				if = {
					limit = { controls_state = 802 } #Xiamen
					595 = {
						add_dynamic_modifier = {
							modifier = CHI_state_capitalism_plan
						}
					}
				}
			}
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = CHI_develop_heavy_industry
		icon = GFX_CHI_taiyuan_arsenal
		cost = 5

		relative_position_id = CHI_embrace_autarky
		x = 1
		y = 1

		prerequisite = { focus = CHI_embrace_autarky }
		prerequisite = { focus = CHI_create_the_nec }
		ai_will_do = {
			base = 100
			modifier = {
				factor = 0.5
				has_war = yes
			}
			modifier = {
				factor = 2
				has_war = no
			}
		}
		completion_reward = {
			custom_effect_tooltip = CHI_more_NCC_decisions_tt
			add_offsite_building = { type = industrial_complex level = 2 }
		}
		search_filters = { FOCUS_FILTER_INDUSTRY }
	}

	focus = {
		id = CHI_expand_the_academica_sinica
		icon = GFX_CHI_research_1
		prerequisite = { focus = CHI_unified_industrial_planning }
		x = 2
		y = 1
		relative_position_id = CHI_unified_industrial_planning

		cost = 6

		ai_will_do = {
			factor = 4
		}

		available = {
			OR = {			
				has_war = no
				has_stability > 0.7
			}
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_RESEARCH }
		completion_reward = {
			add_research_slot = 1
		}
	}

	focus = {
		id = CHI_chemical_research_institute
		icon = GFX_CHI_research_2
		prerequisite = { focus = CHI_expand_the_academica_sinica }
		x = 0
		y = 1
		relative_position_id = CHI_expand_the_academica_sinica

		cost = 6

		ai_will_do = {
			factor = 1
		}

		available = {
			num_of_factories > 74
			amount_research_slots < 5
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_RESEARCH }
		completion_reward = {			
			add_research_slot = 1
		}
	}

	focus = {
		id = CHI_rural_reconstruction_movement
		icon = GFX_CHI_rural_reconstruction
		prerequisite = { focus = CHI_unified_industrial_planning }
		x = 0
		y = 1
		relative_position_id = CHI_unified_industrial_planning

		cost = 6

		ai_will_do = {
			factor = 4
		}

		available = {
			has_full_control_of_state = 607
			has_full_control_of_state = 602
			has_full_control_of_state = 605
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_INDUSTRY }
		completion_reward = {
			607 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			602 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			605 = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}

		}
	}

	focus = {
		id = CHI_mining_commission
		icon = GFX_CHI_mining_commission
		prerequisite = { focus = CHI_rural_reconstruction_movement }
		x = 0
		y = 1
		relative_position_id = CHI_rural_reconstruction_movement

		cost = 6

		ai_will_do = {
			factor = 4
		}

		available = {
			NOT = {
				has_idea = CHI_hyper_inflation_5
			}
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_INDUSTRY }
		completion_reward = {
			CHI_hyper_inflation_level_up = yes
			custom_effect_tooltip = available_industrial_concern
			show_ideas_tooltip = CHI_mining_commission			
		}
	}

	focus = {
		id = CHI_taiyuan_arsenal
		icon = GFX_CHI_taiyuan_arsenal
		prerequisite = { focus = CHI_mining_commission }
		x = 2
		y = 1
		relative_position_id = CHI_mining_commission

		cost = 6

		ai_will_do = {
			factor = 1
		}

		available = {
			controls_state = 615
			NOT = {
				has_idea = CHI_hyper_inflation_5
			}
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		search_filters = { FOCUS_FILTER_INDUSTRY }
		completion_reward = {
			CHI_hyper_inflation_level_up = yes
			615 = {
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = arms_factory
					level = 3
					instant_build = yes
				}			
			}
		}
	}

	focus = {
		id = CHI_develop_the_hanyan_arsenal
		icon = GFX_CHI_develop_the_hanyan_arsenal
		prerequisite = { focus = CHI_mining_commission }
		x = 0
		y = 1
		relative_position_id = CHI_mining_commission

		cost = 6

		ai_will_do = {
			factor = 1
		}

		available = {
			NOT = {
				has_idea = CHI_hyper_inflation_5
			}
		}

		bypass = {

		}

		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = no

		complete_tooltip = {
			CHI_hyper_inflation_level_up = yes
			random_state = {
				limit = {
					has_state_flag = CHI_develop_the_hanyan_arsenal_AF
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = arms_factory
					level = 3
					instant_build = yes
				}
			}
		}

		search_filters = { FOCUS_FILTER_INDUSTRY }
		completion_reward = {
			CHI_hyper_inflation_level_up = yes
			random_owned_controlled_state = {
				prioritize = { 620 }
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = arms_factory
					level = 3
					instant_build = yes
				}
				set_state_flag = CHI_develop_the_hanyan_arsenal_AF
			}
		}
	}
}
